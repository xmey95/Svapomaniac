!function(){"use strict";var e=(new Date).getTime();angular.module("app",["ngSanitize","agGrid","ui.bootstrap.typeahead","colorService","fnfConstants","actionLabelMappingService","shortcutService","notify","keyboard","app.keyboard","folderBtnDirective","menuitemDirective","toolmenuitemDirective","filecountDirective","pathLabelDirective","filterInputDirective","rightClickDirective","longClickDirective","longPressDirective","colorPopoverDirective","templates","socket","filesocket","searchService","ChdirActionController","chdirActionService","chdirGridOptionsFactory","gridModel","gridOptions","executorFactory","actionQueueService","dialogActionMappingService","dialogService","tabService","eventCacheFactory","SelectionController","DeselectionController","shellActionService","openfileActionService","commandService","FindActionController","findActionService","DeleteEmptyFoldersActionController","deleteEmptyFoldersActionService","DeleteActionController","deleteActionService","CopyActionController","copyActionService","GroupfilesActionController","groupfilesActionService","groupfilesTableService","MoveActionController","moveActionService","MkdirActionController","mkdirActionService","RenameActionController","renameActionService","MultirenameActionController","multirenameActionService","multirenameDataService","GotoAnythingController","gotoAnythingService","JobQueueController","jobQueueGridOptionsFactory","jobService","configService","toolService","folderActionService","folderService","actionService","initService","selectionService","historyService","deepSelectionService","deepSumSizeService","dropDirective","dragEnterDirective","dragOverDirective","dragLeaveDirective","DropActionController","dropActionService","dropzoneDirective","clipboardService","gridiconService","mainService","colorconfigService","ColorconfigController"]).config(["$provide","$compileProvider","$logProvider",function(e,t,o){o.debugEnabled(!1),t.debugInfoEnabled(!1)}]).run(["$log","searchService","$timeout","$templateCache",function(t,o,n,i){var r=(new Date).getTime();t.info("FnF app started in "+(r-e)+" ms."),t.info("searchService",o.init()),n(function(){$("[tabindex]").removeAttr("tabindex"),document.addEventListener("dragover",function(e){return e.preventDefault(),!1},!1),document.addEventListener("drop",function(e){return e.preventDefault(),!1},!1)},234)}])}(),$(function(){$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()}),function(){"use strict";function e(e,t,o,n,i,r,a,l,c,s,d,u,f,g,p,m,v,b){v.info("AppController...");var h=this;h.colorPopoverVisible=!1,h.getShortcutByActionId=a.getShortcutByActionId,h.printShortcutByActionId=a.printShortcutByActionId,h.getLabelForAction=a.getLabelForAction;var S=a.kbdHtml;h.printShortcutByActionIdAsHtml=function(e){return S(h.printShortcutByActionId(e))},h.data=i.getData(),h.getGridOptions=n.getGridOptions,h.getGridModel=n.getGridModel,h.getGridModelCount=n.getGridModelCount,h.action=u.action,h.init=o.init,h.getFolderLabel=t.getFolderLabel,h.getQueueStatus=r.getQueueStatus,h.getQueueProgress=r.getQueueProgress,h.getDir=e.getDir,h.getActivePath=e.getSourceDir,h.onTabDblclicked=e.onTabDblclicked,h.onTabClicked=e.onTabClicked,h.addTab=e.addTab,h.reload=e.reload,h.setFolder=e.setFolder,h.isFav=p.isFav,h.unfav=p.unfav,h.fav=p.fav,h.popupMenu=function(e,t){f.emit("SHOW_POPUP",{event:e,panelIndex:t})},h.getLatest=g.getLatest,h.setActivePanel=function(e){h.data.activePanelIndex=e},h.setStyle=function(e){m.loadColorConfig(e,function(t){if(200===t.status){h.data.colorname=e;for(var o in t.data.colors)document.documentElement.style.setProperty(o,t.data.colors[o])}})},h.openDropDialog=function(e){h.action(h.OPEN_DROP_DLG)},h.setFolderOnActivePanel=function(e){h.setFolder(h.data.activePanelIndex,e)},h.runTool=e.runTool,l.applyConstants(h),f.addListener(r.ACTION_REFRESH_PANEL,function(e,t){v.info(r.ACTION_REFRESH_PANEL,e,t),h.reload(e.index)}).addListener("FILES_DROPPED",function(e,t){v.info("files",e)}),v.log(c.iam),v.log(s.iam)}angular.module("app").controller("AppController",e),e.$inject=["mainService","folderService","initService","gridService","dataService","actionQueueService","shortcutService","constantsService","selectionService","folderActionService","tabService","actionService","notifyService","historyService","configService","colorService","$log","$timeout"]}(),function(){"use strict";function e(e,t,o,n,i,r,a){var l={},c=t.getGridApi,s=t.getGridOptions,d=t.getGridModel,u=o.getActiveTab,f=o.getTabCount,g=o.getTabs,p=o.selectPanel,m=r.openFile,v=a.execute,b=e.getData(),h=function(e){var t,o=[],n=e.cmd;if(e.para&&(n+=e.para),n.indexOf("$file")>-1){var i=j(),r=e.fileLimit;if(r||(r=10),0===i.length){var a=U();a&&i.push(a)}for(t=0;t<i.length&&r>t;t++){var l=i[t].dir+"/"+i[t].base;o.push(n.replace(/\$file/g,l))}}if(0===o.length&&o.push(n),n.indexOf("$dir")>-1){var c=N();for(t=0;t<o.length;t++)o[t]=o[t].replace(/\$dir/g,c)}v(o)},S=function(){var e=i.getPrevFolder(N());e&&de(D(),e)},E=function(){var e=N().replace(/\\/g,"/");if(e.indexOf("/")>-1){var t=e.split("/"),o=t.slice(0,t.length-1).join("/");de(D(),o)}},_=function(){return Math.abs(b.activePanelIndex-1)},D=function(){return b.activePanelIndex},O=function(){return u(_())},y=function(){return u(D())},C=function(e){return u(e)},N=function(){return y().path},L=function(){return O().path},A=function(e){return C(e).path},T=function(){return c(_())},x=function(){return c(D())},k=function(){return s(_())},P=function(){return s(D())},I=function(){return d(_())},w=function(){return d(D())},R=function(){var e=x().getSelectedRows();if(e&&e.length)return e;var t=G();return t?[t]:[]},F=function(){return x().getSelectedRows()},M=function(){var e=F();return e.length>0?e[0]:null},G=function(){var e=x(),t=e.getFocusedCell();return t?t.node.data:null},U=function(){var e=M();if(e)return e;if(e=G())return e;var t=x(),o=t.grid.gridOptions.rowData;return o&&o.length>0?o[0]:null},j=function(){for(var e=F(),t=[],o=0;o<e.length;o++)e[o].isDir||t.push(e[o]);return t},H=function(){for(var e=F(),t=[],o=0;o<e.length;o++)t.push(e[o]);return t},z=function(){for(var e=F(),t=[],o=0;o<e.length;o++)e[o].isDir&&t.push(e[o].dir+"/"+e[o].base);return t},B=function(){var e=F();return e.length},W=function(){var e,t=[],o=N(),n=function(e){e=V(e),e!=o&&-1===t.indexOf(e)&&t.push(e)};for(n(O().path),e=0;e<b.favs.length;e++)n(b.favs[e]);var i=g(_());for(e=0;e<i.length;e++)n(i[e].path);for(i=g(D()),e=0;e<i.length;e++)n(i[e].path);for(e=0;e<b.folderHistory.length;e++)n(b.folderHistory[e]);return t},K=function(){return b.folderHistory},V=function(e){return e?e.replace(/\\/g,"/"):null},Q=function(e,t){var o=function(){p(e)};n.loadDirectory(e,t,o)},Y=function(){s(D()).lastRowIndex=J()},J=function(){var e=x(),t=e.getFocusedCell();if(t)return t.rowIndex;var o=e.getSelectedNodes();return o&&o.length>0?o[0].childIndex:0},q=function(e,t){o.onTabDblclicked(e,t,function(t){Q(e,{path:t.path})})},X=function(e,t){o.onTabClicked(e,t,function(e,t){Q(e,{path:t.path,fileList:t.fileList})})},Z=function(e){o.addTab(e,function(e,t){Q(e,{path:t.path})})},ee=function(){Z(D())},te=function(){var e=D();f(e)>1&&q(e,y())},oe=function(e){var t=u(e);t.fileList||Q(e,{path:u(e).path,nocache:!0})},ne=function(){var e=x();e.setFocusedCell(0,0)},ie=function(){var e=x(),t=P();e.setFocusedCell(t.rowData.length-1,0)},re=function(){var e=x(),t=e.getFocusedCell();if(t){var o=P(),n=le(o),i=t.rowIndex-n+1;i=Math.max(0,Math.min(o.rowData.length-1,i)),e.setFocusedCell(i,0)}},ae=function(){var e=x(),t=e.getFocusedCell();if(t){var o=P(),n=le(o),i=t.rowIndex+n-1;i=Math.max(0,Math.min(o.rowData.length-1,i)),e.setFocusedCell(i,0)}},le=function(e){var t=e.api,o=$(t.gridPanel.eBody).height(),n=(o-1e-8*e.headerHeight)/e.rowHeight;return n=parseInt(""+n)},ce=function(){var e=U();if(e){var t=e.dir+"/"+e.base;if(e.isDir){var o=D();de(o,t)}else m(t)}},se=function(){var e=x(),t=P(),o=e.getFocusedCell();if(o){var n=o.rowIndex,i=o.node,r=e.isNodeSelected(i);r?e.deselectNode(i,!1):e.selectNode(i,!0,!1),n++,n=Math.max(0,Math.min(t.rowData.length-1,n)),e.setFocusedCell(n,0)}},de=function(e,t,n){var i=V(t).split("/"),r=o.getActiveTab(e);r.path=t,r.label=i[i.length-1],Q(e,{path:t},n)},ue=function(e,t,o,n,i){return(t=Math,o=t.log,n=1e3,i=o(e)/o(n)|0,e/t.pow(n,i)).toFixed(2)+" "+(i?"kMGTPEZY"[--i]+"B":"Bytes")},fe=function(e,t,o,n,i){return(t=Math,o=t.log,n=1024,i=o(e)/o(n)|0,e/t.pow(n,i)).toFixed(2)+" "+(i?"KMGTPEZY"[--i]+"iB":"Bytes")};return l.onHomePressed=ne,l.onEndPressed=ie,l.onPageUpPressed=re,l.onPageDownPressed=ae,l.storeLastRowIndex=Y,l.onEnterPressed=ce,l.toggleCurrentRow=se,l.runTool=h,l.openFile=m,l.fileSizeSI=ue,l.fileSizeIEC=fe,l.loadDirectory=Q,l.setFolder=de,l.onTabDblclicked=q,l.onTabClicked=X,l.addTab=Z,l.addNewTabOnActivePanel=ee,l.removeTabOnActivePanel=te,l.reload=oe,l.navigateDown=E,l.navigateBack=S,l.getTargetPanelIndex=_,l.getSourcePanelIndex=D,l.getTargetTab=O,l.getSourceTab=y,l.getTab=C,l.getTargetDir=L,l.getSourceDir=N,l.getDir=A,l.getTargetGridApi=T,l.getSourceGridApi=x,l.getTargetGridOptions=k,l.getSourceGridOptions=P,l.getTargetGridModel=I,l.getSourceGridModel=w,l.getFocusedRow=G,l.getRowsForAction=R,l.getSelectedRows=F,l.getSelectedFiles=j,l.getSelectedFilesAndFolders=H,l.getSelectedAbsoluteFolders=z,l.getSelectedCount=B,l.getFirstSelectedItem=M,l.getFirstPossibleRow=U,l.getFolderHistory=K,l.getPossibleTargetFolders=W,l.slash=V,l}angular.module("mainService",[]).factory("mainService",e),e.$inject=["dataService","gridService","tabService","folderService","historyService","openfileActionService","shellActionService"]}(),function(){"use strict";function e(e,t,o){e.info("gridService...");var n={},i=function(){var e=o.getOptions();return t.getInstance(e)},r={gridModels:[i(),i()]},a=function(e){for(var t=[],o=e.getSelectedNodes(),n=0;n<o.length;n++){var i=o[n].data;t.push({dir:i.dir,base:i.base})}return t},l=function(e,t){t.forEachNode(function(o){var n=c(o.data,e);n&&t.selectNode(o,!0)})},c=function(e,t){for(var o=0;o<t.length;o++){var n=t[o];if(n.base===e.base&&n.dir===e.dir)return!0}return!1},s=function(){var e=[i(),i()];return e},d=function(e){return u(e).api},u=function(e){return f(e).getGridOptions()},f=function(e){return r.gridModels[e]},g=function(){return r.gridModels.length},p=function(e){var t=d(e),o=u(e),n=o.lastRowIndex;if(void 0===n){var i=t.getFocusedCell();if(i)n=i.rowIndex;else{var r=t.getSelectedNodes();r&&r.length>0&&(n=r[0].childIndex)}}void 0===n&&(n=0),n=Math.max(0,Math.min(o.rowData.length-1,n)),t.setFocusedCell(n,0)};return n.storeSelection=a,n.restoreSelection=l,n.getGridModels=s,n.getGridApi=d,n.getGridOptions=u,n.getGridModel=f,n.getGridModelCount=g,n.autoFocusedCell=p,n}angular.module("app").service("gridService",e),e.$inject=["$log","gridModelFactory","gridOptionsFactory"]}(),function(){"use strict";function e(){var e=function(e){var t=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,o){e.data.isDir&&t++}),t},o=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,o){e.data.isDir||t++}),t},n=function(){if(!e.api)return 0;var t=0;return e.api.forEachNode(function(e,o){e.data.size&&(t+=e.data.size)}),t/1e3},i=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),o=0,n=0;n<t.length;n++)t[n].isDir&&o++;return o},r=function(){return l(n())},a=function(){return l(s())},l=function(e,t,o,n,i){return(t=Math,o=t.log,n=1e3,i=o(e)/o(n)|0,e/t.pow(n,i)).toFixed(2)+" "+(i?"kMGTPEZY"[--i]+"B":"Bytes")},c=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),o=0,n=0;n<t.length;n++)t[n].isDir||o++;return o},s=function(){if(!e.api)return 0;for(var t=e.api.getSelectedRows(),o=0,n=0;n<t.length;n++)t[n].size&&(o+=t[n].size);return o/1e3},d=function(){return e},u={};return u.getFolderCount=t,u.getFileCount=o,u.getSizeSum=n,u.getSizeSumText=r,u.getSelectedFolderCount=i,u.getSelectedFileCount=c,u.getSelectedSizeSum=s,u.getSelectedSizeSumText=a,u.getGridOptions=d,u};return{getInstance:function(t){return new e(t)}}}angular.module("gridModel",[]).factory("gridModelFactory",e),e.$inject=[]}(),function(){"use strict";function e(e){var t=0,o=function(){var o=[{headerName:"Name",field:"base",width:430,cellRenderer:e.nameCellRenderer,comparator:e.nameComparator,sort:"asc",icons:e.TEXT_SORT_ICONS,cellClassRules:e.cellClassRules},{headerName:"Ext",field:"ext",width:80,cellRenderer:e.extCellRenderer,icons:e.TEXT_SORT_ICONS,cellClassRules:e.cellClassRules},{headerName:"Size",field:"size",width:110,"volatile":!0,icons:e.ALPHA_ICONS,cellRenderer:e.sizeCellRenderer,comparator:e.sizeComparator,cellStyle:{"text-align":"right"},cellClassRules:e.cellClassRules},{headerName:"Date",field:"date",width:180,cellRenderer:e.dateCellRenderer,cellClassRules:e.cellClassRules}],n=[],i=function(e){var t=this;setTimeout(function(){if(e.event.shiftKey&&void 0!==t.previousSelectedRowIndex)for(var o=e.rowIndex<t.previousSelectedRowIndex?e.rowIndex:t.previousSelectedRowIndex,n=e.rowIndex>t.previousSelectedRowIndex?e.rowIndex:t.previousSelectedRowIndex,i=o;n>=i;i++)t.api.selectIndex(i,!0,!1);t.previousSelectedRowIndex=e.rowIndex},0)},r=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},a={gid:t++,headerHeight:30,rowHeight:28,columnDefs:o,rowData:n,rowSelection:"multiple",rowDeselection:!0,enableColResize:!0,enableFilter:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS,onCellFocused:r,onRowClicked:i};return a};return{getOptions:function(){return new o}}}angular.module("gridOptions",[]).factory("gridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(){var e={},t=function(t){return t.ICONS={columnRemoveFromGroup:'<i class="fa fa-remove"/>',filter:'<i class="fa fa-filter"/>',sortAscending:'<i class="fa fa-long-arrow-down"/>',sortDescending:'<i class="fa fa-long-arrow-up"/>',groupExpanded:'<i class="fa fa-minus-square-o"/>',groupContracted:'<i class="fa fa-plus-square-o"/>',headerGroupOpened:'<i class="fa fa-minus-square-o"/>',headerGroupClosed:'<i class="fa fa-plus-square-o"/>'},t.TEXT_SORT_ICONS={sortAscending:'<i class="fa fa-sort-alpha-asc"/>',sortDescending:'<i class="fa fa-sort-alpha-desc"/>'},t.ALPHA_ICONS={sortAscending:'<i class="fa fa-sort-amount-asc"/>',sortDescending:'<i class="fa fa-sort-amount-desc"/>'},t.fileCellRenderer=function(e){if(!e.value)return"";var t=e.value.dir?(e.value.dir+"/").replace(/\\/g,"/"):"",o=e.value.base?e.value.base:"";return t+o},t.fileBaseCellRenderer=function(e){return e.value&&e.value.base?e.value.base:""},t.extCellRenderer=function(e){return e&&e.data?e.data.isDir?"":e.value?e.value:"":""},t.nameCellRenderer=function(e){if(!e)return"";if(!e.data)return"";if(e.data.abs)return e.data.dir+"/"+e.data.base;var t=e.value;return e.data.isDir||(t=e.value.replace(e.data.ext,"")),e.data.isDir?'<i class="fa fa-folder"></i> ['+t+"]":e.data.error&&"EPERM"===e.data.error.code?'<i class="text-muted">'+t+"</i>":e.data.ext.match(/\.doc(x)?$/)?'<i class="fa fa-file-word-o"></i> '+t:e.data.ext.match(/\.epub$|\.rtf$|\.txt$/)?'<i class="fa fa-file-text-o"></i> '+t:e.data.ext.match(/\.pdf$/)?'<i class="fa fa-file-pdf-o"></i> '+t:e.data.ext.match(/\.avi$|\.mkv$|\.wmv$|\.mp(e)?g$|\.mov$|\.ram$/)?'<i class="fa fa-file-video-o"></i> '+t:e.data.ext.match(/\.ppt(x)?$/)?'<i class="fa fa-file-powerpoint-o"></i> '+t:e.data.ext.match(/\.xls(x)?$/)?'<i class="fa fa-file-excel-o"></i> '+t:e.data.ext.match(/\.bmp$|\.gif$|\.jpg$/)?'<i class="fa fa-file-image-o"></i> '+t:e.data.ext.match(/\.js$|\.java$|\.json$/)?'<i class="fa fa-file-code-o"></i> '+t:e.data.ext.match(/\.zip$|\.rarp$|\.7z$/)?'<i class="fa fa-file-archive-o"></i> '+t:e.data.ext.match(/\.mp3$|\.wav$/)?'<i class="fa fa-file-audio-o"></i> '+t:'<i class="fa fa-file-o"></i> '+t},t.sizeCellRenderer=function(e){return e&&e.data?"temp"===e.data.status?"-":e.value?e.value.toLocaleString("en-US",{minimumFractionDigits:0}):e.data.isDir?"&lt;DIR&gt;":"?":""},t.dateCellRenderer=function(e){return e.data?"temp"===e.data.status?"-":e.value?e.value.toString().substr(0,16).replace(/[A-Z]/g," "):"?":""},t.cellClassRules={"text-muted":function(e){return e.data&&"temp"===e.data.status},"fnf-long-text":function(e){return e.data.abs&&"base"===e.colDef.field},"fnf-display-none":function(e){return e.data.abs&&"base"!==e.colDef.field},"text-success":function(e){return e.data.isWalking&&"size"===e.colDef.field}},t.nameComparator=function(e,t,o,n,i){var r=i?-1:1;if(!o)return r;if(!n)return-r;if(!e)return r;if(!t)return-r;if(!o.data)return r;if(!n.data)return-r;var a=e.toUpperCase(),l=t.toUpperCase();return o.data.isDir&&!n.data.isDir?-r:!o.data.isDir&&n.data.isDir?r:o.data.isDir&&n.data.isDir?a.localeCompare(l):a.localeCompare(l)},t.sizeComparator=function(e,t,o,n,i){var r=i?-1:1;if(!o)return r;if(!n)return-r;if(!e)return r;if(!t)return-r;if(!o.data)return r;if(!n.data)return-r;var a=o.data.base.toUpperCase(),l=n.data.base.toUpperCase();return o.data.isDir&&!n.data.isDir?-r:!o.data.isDir&&n.data.isDir?r:o.data.isDir&&n.data.isDir?a.localeCompare(l):e-t},e};return t(e),e.applyConstants=t,e}angular.module("gridiconService",[]).factory("gridiconService",e),e.$inject=[]}(),function(){"use strict";function e(e){return{restrict:"E",scope:{quickFilterText:"="},link:function(t,o,n){var i=null,r=function(){i&&e.cancel(i),i=e(function(){t.quickFilterText&&""!==t.quickFilterText||(t.filterInputVisible=!1)},6666)};t.filterInputVisible=!1,t.filterInputChanged=function(){i&&e.cancel(i),""===t.quickFilterText&&r()},t.onClicked=function(){t.filterInputVisible=!t.filterInputVisible,t.filterInputVisible?r():t.quickFilterText=""},t.onDblClicked=function(){t.quickFilterText="",r()}},templateUrl:"/fnf/gui/filterinput/filterinput.html"}}angular.module("filterInputDirective",[]).directive("filterInput",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{startingPoints:"=",label:"=",onFolderChanged:"&"},link:function(e,t,o){},templateUrl:"/fnf/gui/folderbutton/folderbutton.html"}}angular.module("folderBtnDirective",[]).directive("folderbtn",e),e.$inject=[]}(),function(){"use strict";function e(){return{restrict:"E",scope:{model:"="},link:function(e,t,o){},templateUrl:"/fnf/gui/filecount/filecount.html"}}angular.module("filecountDirective",[]).directive("filecount",[e]),e.$inject=[]}(),function(){"use strict";function e(e){var t=["$scope",function(t){var o=t,n=e.printShortcutByActionId,i=e.kbdHtml;o.$watch("mid",function(o,r){o&&(t.shortcut=i(n(o)),t.label=e.getLabelForAction(o),t.id=o)}),o.clickOn=function(){t.onItemClicked({mid:t.id})}}];return{restrict:"E",scope:{mid:"=",onItemClicked:"&"},link:function(e,t,o){},controller:t,templateUrl:"/fnf/gui/menuitem/menuitem.html"}}angular.module("menuitemDirective",[]).directive("menuitem",e),e.$inject=["shortcutService"]}(),function(){"use strict";function e(e){var t=["$scope",function(t){var o=t,n=e.printShortcut,i=e.kbdHtml;o.$watch("tool",function(e,o){if(e){var r=e;t.shortcut=i(n(r.shortcut)),t.label=r.label,t.id=r.id,t.tool=r}}),o.clickOn=function(){t.onItemClicked({tool:t.tool})}}];return{restrict:"E",scope:{tool:"=",onItemClicked:"&"},link:function(e,t,o){},controller:t,templateUrl:"/fnf/gui/menuitem/menuitem.html"}}angular.module("toolmenuitemDirective",[]).directive("toolmenuitem",e),e.$inject=["shortcutService"]}(),function(){"use strict";function e(e){var t=function(e){return e?e.replace(/\\/g,"/"):""},o=["$scope",function(e){e.$watch("path",function(o,n){if(o){var i=t(o).split("/");e.pathes=i}}),e.clickOnIndex=function(t){var o=e.pathes.slice(0,t+1).join("/");e.onFolderChanged({folder:o})}}];return{restrict:"E",scope:{path:"=",onFolderChanged:"&"},link:function(e,t,o){},controller:o,templateUrl:"/fnf/gui/pathlabel/pathlabel.html"}}angular.module("pathLabelDirective",[]).directive("pathlabel",e),e.$inject=["$log"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&rightClick",event:"=event"},link:function(t,o,n){document.oncontextmenu=function(e){return e.target.hasAttribute("right-click")?!1:void e.preventDefault()};var i=function(o){t.event=o,console.info("ev",o),e(function(){t.$apply(t.fn({event:t.event}))},111)};o.bind("contextmenu",i)}}}angular.module("rightClickDirective",[]).directive("rightClick",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&longClick",event:"=event"},link:function(t,o,n){var i=0;t.event=void 0;var r=function(e){i=Date.now(),t.event=e,e.preventDefault()},a=function(){Date.now()-i>1e3&&e(function(){t.$apply(t.fn({event:t.event}))},111)};o.bind("touchstart mousedown",r),o.bind("touchend mouseup",a)}}}angular.module("longClickDirective",[]).directive("longClick",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{fn:"&longPress",event:"=event"},link:function(t,o,n){var i=0;t.event=void 0;var r=function(o){i=e(a,1e3),t.event=o,o.preventDefault()},a=function(){l(),e(function(){t.$apply(t.fn({event:t.event}))},111)},l=function(){e.cancel(i)};o.bind("touchstart mousedown",r),o.bind("touchend mouseup",l)}}}angular.module("longPressDirective",[]).directive("longPress",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t){var o=0,n=0;return{restrict:"E",scope:{visible:"=visible",target:"=target"},link:function(e,i,r){function a(e){e=e.replace(/#/g,"");for(var t="",o=0;6>o;o++)t+=(15-parseInt(e[o],16)).toString(16);return t}$(i).hide(),console.info("colorPopoverDirective...");var l=null,c=null,s=!1,d=null,u=getComputedStyle(document.documentElement),f=function(e){return String(u.getPropertyValue(e)).trim()},g=function(e,t){document.documentElement.style.setProperty(e,t)},p=function(){if(c&&l&&null!==d)if(s===!0){console.info("checkPopover is visible"),o++;var r="colorpopover_"+o;$.browser={chrome:!0};for(var u='<div id="'+r+'">',f=0;f<c.length;f++){var g=c[f];u=u+"<div><small>"+g+":</small></div>",u=u+'<input  type="text" name="color'+f+'"  class="form-control form-control-sm color-picker" maxlength="30" ng-model="color'+f+'" >'}u+="</div>";var p=angular.element(u),m=t(p),v=m(e);$(i).html(v),d.popover({trigger:"manual",container:"body",html:!0,template:'<div class="popover colorpopover" role="tooltip"><div class="popover-arrow"></div><!--h3 class="popover-title"></h3--><div class="popover-content"></div></div>',content:v}).popover("show").on("shown.bs.popover",function(){var e="#"+r+" input.color-picker";$(e).each(function(e,t){var o=$(t);return n++,o.data("tool",n),o.popover({template:'<div class="popover colorpopover" role="tooltip"><div class="popover-arrow"></div><div class="popover-content"></div></div>',trigger:"focus",placement:"bottom",html:!0,content:"<div id='colorpicker-"+o.data("tool")+"'><div class='color-picker'></div></div>"}).on("click",function(){var e="#colorpicker-"+o.data("tool"),t=$.farbtastic(e,{});t.setColor(o.val()),t.linkTo(function(e){var t=a(e);console.info("color",e),console.info("ch",t),o.val(e).change().css("background-color",e).css("color","#"+t)})})})})}else s===!1&&d.popover("hide")};e.$watch(r.values,function(t){if(t){c=t;for(var o=0;o<c.length;o++){var n=c[o];e["color"+o]=f(n),e["colorname"+o]=n,function(t){e.$watch("color"+t,function(o){g(e["colorname"+t],e["color"+t])})}(o)}}p()}),e.$watch("visible",function(e){s=e,p()}),e.$watch("target",function(e){l=e,d=$(l),p()})}}}angular.module("colorPopoverDirective",[]).directive("colorPopover",e),e.$inject=["$log","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{dragEnter:"&"},link:function(t,o,n){o.bind("dragenter",function(o){o.stopPropagation(),o.preventDefault(),e(function(){t.dragEnter({e:o})})})}}}angular.module("dragEnterDirective",[]).directive("dragEnter",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:{dragOver:"&"},link:function(e,t,o){t.bind("dragover",function(t){t.stopPropagation(),t.preventDefault(),e.dragOver({e:t})})}}}angular.module("dragOverDirective",[]).directive("dragOver",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{dragLeave:"&"},link:function(t,o,n){o.bind("dragleave",function(o){o.stopPropagation(),o.preventDefault(),e(function(){t.dragLeave({e:o})})})}}}angular.module("dragLeaveDirective",[]).directive("dragLeave",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t){return{restrict:"A",scope:{drop:"&"},link:function(t,o,n){o.bind("drop",function(o){return o.stopPropagation(),o.preventDefault(),e(function(){t.drop({e:o})}),!1})}}}angular.module("dropDirective",[]).directive("drop",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t){function o(o){t.info("handleFileSelect",o),o.stopPropagation(),o.preventDefault();var n=o.dataTransfer.files;e.$emit("FILES_DROPPED",n)}function n(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function i(e){t.info(e),e.stopPropagation(),e.preventDefault(),e.target.classList.add("alert-success")}function r(e){t.info(e.target.classList),e.stopPropagation(),e.preventDefault(),e.target.classList.remove("alert-success")}var a=0;return{restrict:"A",link:function(e,l,c){var s=l.attr("id");s||(s="dopzone_"+a++,l.attr("id",s));var d=document.getElementById(s);d.addEventListener("dragenter",i,!1),d.addEventListener("dragleave",r,!1),d.addEventListener("dragover",n,!1),d.addEventListener("drop",o,!1),t.info("element",d)}}}angular.module("dropzoneDirective",[]).directive("dropzone",e),e.$inject=["notifyService","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("DropActionController...");var i=this;i.what="",i.doGoto=e.doGoto,i.doCopy=e.doCopy,i.closeDlg=e.closeDlg,i.select=function(e){i.what=e},i.clear=function(e){i.what===e&&(i.what="")},i.over=function(e){e.originalEvent.dataTransfer.dropEffect="copy",n.info("over",e)};var r=function(){};o.removeListenersForKey("OPEN_DROP_DLG_ON_SHOW").removeListenersForKey("OPEN_DROP_DLG_ON_SHOWN").removeListenersForKey("OPEN_DROP_DLG_ON_HIDDEN").addListener("OPEN_DROP_DLG_ON_SHOW",r)}angular.module("DropActionController",[]).controller("DropActionController",e),e.$inject=["dropActionService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("dropActionService...");var n=(e.getSourcePanelIndex,function(e){o.info("doGoto",e),r()}),i=function(e){o.info("doCopy",e),r()},r=function(e){$('button[data-dismiss="modal"]').click()},a={};return a.doGoto=n,a.doCopy=i,a.closeDlg=r,a}angular.module("dropActionService",[]).factory("dropActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t){var o=io.connect();e.info("SocketService...",o);var n=o.removeListener,i=function(e,t){o.on(e,function(){t.apply(o,arguments)})},r=function(e,t,n){o.emit(e,t,function(){n&&n.apply(o,arguments)})},a={};return a.removeListener=n,a.on=i,a.emit=r,a}angular.module("socket",[]).factory("socketService",e),e.$inject=["$log","$rootScope"]}(),function(){"use strict";function e(e,t){var o=0,n=e.on,i=e.emit,r=e.removeListener,a=function(e,t){!function(e,o){var a=e.path,l=[],c="dir"+o;n(c,function(e){e.begin&&(l=[]),e.base&&l.push(e),e.end&&(r(c),t(null,l))}),i("dir",{path:a,rid:o,nocache:e.nocache})}(e,++o)},l=function(e){if(!e)throw Error("initialLoad(callback): callback is null.");n("initialload",function(t){e(t),r("initialload")}),i("initialload")},c={};return c.loadDirectory=a,c.initialLoad=l,c}angular.module("filesocket",[]).factory("fileSocketService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){var r={},a=["",""],l=t.getGridApi,c=function(e){return e?e.replace(/\\/g,"/"):""},s=function(e,t,n){var i=l(e);return t.fileList?(i.setRowData(t.fileList),void(a[e]="")):t.path?(o.addFolder(t.path),void((t.nocache||a[e]!==t.path)&&d(e,t,n))):(i.setRowData([]),void(a[e]=""))},d=function(t,o,r){!function(t,o){a[t]=c(o.path);var s=l(t);e.loadDirectory(o,function(e,a){return e?i.error(e):void n(function(){s.setRowData(a.slice(0)),s.sizeColumnsToFit(),r&&r(t,o)})})}(t,o)},u=function(e){return e>=a.length?"?":c(a[e]).split("/")[0]};return r.loadDirectory=s,r.getFolderLabel=u,r.slash=c,r.iam="folderService",r}angular.module("folderService",[]).factory("folderService",e),e.$inject=["fileSocketService","gridService","historyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("folderActionService...");var r={},a=e.getGridOptions,l=e.storeSelection,c=e.restoreSelection,s=o.createCache(function(e){var o=function(e,t,o){for(var n=e.length-1;n>-1;n--)if(e[n].dir===t&&e[n].base===o)return e[n];return null};t.eachActiveTab(function(t,n,i){for(var r,s,d,u,f,g,p,m=a(n),v=m.api,b=l(v),h=!1,S=0;S<e.length;S++)if(u=e[S],u.item.dir===t.path)if("focus"===u.event){h=!1,v.deselectAll();var E=v.getModel();r=0,E.forEachNode(function(e){var t=e.data;t.base===u.item.base&&t.dir===u.item.dir&&v.setFocusedCell(e.childIndex,0),r++})}else if("select"===u.event)for(f=v.getSelectedNodes(),g=0;g<f.length;g++)p=f[g].data,p.base===u.item.base&&p.dir===u.item.dir?v.selectNode(f[g],!0,!1):v.deselectNode(f[g],!1);else if("unselect"===u.event)for(f=v.getSelectedNodes(),g=0;g<f.length;g++)p=f[g].data,p.base===u.item.base&&p.dir===u.item.dir&&v.deselectNode(f[g],!1);else if("removed"===u.event)for(r=0;r<m.rowData.length;r++)s=m.rowData[r],s.dir===u.item.dir&&s.base===u.item.base&&(m.rowData.splice(r,1),h=!0,v.refreshView(),v.setRowData(m.rowData));else if("update"===u.event)for(r=0;r<m.rowData.length;r++)s=m.rowData[r],s.dir===u.item.dir&&s.base===u.item.base&&(s.status=u.item.status,h=!0,v.refreshView());else"created"===u.event&&(d=o(m.rowData,u.item.dir,u.item.base),s=d?d:{},s.dir=u.item.dir,s.base=u.item.base,s.ext=u.item.base.substr(u.item.base.lastIndexOf(".")),u.item.size&&(s.size=u.item.size),u.item.date&&(s.date=u.item.date),u.item.isDir&&(s.isDir=!0),u.item.status?s.status=u.item.status:s.status=null,d||m.rowData.push(s),v.setRowData(m.rowData),h=!0);h&&c(b,v)})});return n.addListener("unselect",s.add),n.addListener("select",s.add),n.addListener("created",s.add),n.addListener("update",s.add),n.addListener("focus",s.add),n.addListener("removed",s.add),r.iam="folderActionService",r}angular.module("folderActionService",[]).factory("folderActionService",e),e.$inject=["gridService","tabService","eventCacheFactory","notifyService","$log"]}(),function(){"use strict";function e(e){var t=function(e){var t,o=[],n=-1,i=16,r=16e3,a=function(e){var t="function"==typeof Date.now?Date.now():(new Date).getTime();0===o.length&&(n=t),o.push(e),t-n>r?s():l()},l=function(){c(),t=window.setTimeout(s,i)},c=function(){t&&window.clearTimeout(t),t=null},s=function(){c();var t=o.slice();o=[],e(t)},d={};return d.add=a,d},o=function(e){return new t(e)},n={};return n.createCache=o,n}angular.module("eventCacheFactory",[]).factory("eventCacheFactory",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t,o,n,i){var r=e.getData();r.tabs=[[{path:"/",label:" ",active:!0}],[{path:"/",label:"",active:!0}]];var a=function(e){return e?e.replace(/\\/g,"/"):null},l=function(e){for(var t=r.tabs,o=0;o<t.length;o++)for(var n=t[o],i=0;i<n.length;i++){var a=n[i];a.active&&e(a,o,i)}},c=null,s=function(e,t,o){c&&n.cancel(c),c=n(function(){g(e,t),o(e,t),c=null},222)},d=function(e,t,o){c&&n.cancel(c),u(e,t,o)},u=function(e,t,o){if(!(r.tabs[e].length<2)){var n=r.tabs[e].indexOf(t);if(n>-1&&r.tabs[e].splice(n,1),t.active){var i=Math.max(0,n-1);r.tabs[e][i].active=!0,o(r.tabs[e][i])}}},f=function(e,t){n(function(){var o=S(e),n={path:a(o.path),label:o.label};n.fileList&&(n.path="",n.label=""),r.tabs[e].push(n),g(e,n),t(e,n)})},g=function(e,t){for(var o=r.tabs[e],n=0;n<o.length;n++)o[n].active=t===o[n]},p=function(e){var t=r.tabs[e],o=b(e);return o++,o<t.length?t[o]:t[0]},m=o.loadDirectory,v=function(e){var o=p(e);s(e,o,function(e,o){m(e,{path:o.path},function(e,o){t.autoFocusedCell(e)})});
},b=function(e){for(var t=r.tabs[e],o=0;o<t.length;o++)if(t[o].active)return o;return 0},h=function(e){return r.tabs[e].length},S=function(e){for(var t=r.tabs[e],o=0;o<t.length;o++){var n=t[o];if(n.active)return n}return null},E=function(e){return r.tabs[e]},_=function(){O(0)},D=function(){O(1)},O=function(e){n(function(){r.activePanelIndex===e?v(e):(r.activePanelIndex=e,t.autoFocusedCell(e))})},y=function(){C(Math.abs(r.activePanelIndex-1))},C=function(e){n(function(){r.activePanelIndex=e,t.autoFocusedCell(e)})},N={};return N.togglePanel=y,N.selectRightPanel=D,N.selectLeftPanel=_,N.selectPanel=C,N.eachActiveTab=l,N.getTabCount=h,N.addTab=f,N.getActiveTab=S,N.getTabs=E,N.selectTab=g,N.onTabClicked=s,N.onTabDblclicked=d,N.iam="tabService",N}angular.module("tabService",[]).factory("tabService",e),e.$inject=["dataService","gridService","folderService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("historyService...");var o=function(e){return e?e.replace(/\\/g,"/"):null},n=e.getData(),i=function(e){n.folderHistory.unshift(o(e)),r()},r=function(){n.folderLatestAdded=[],Array.prototype.push.apply(n.folderLatestAdded,n.initial.startingPoints);for(var e=0;e<n.folderHistory.length&&n.folderLatestAdded.length<15;e++){var t=n.folderHistory[e];-1===n.folderLatestAdded.indexOf(t)&&n.folderLatestAdded.push(t)}},a=function(e){e=o(e);var t=n.folderHistory.lastIndexOf(e);return t<n.folderHistory.length-1?n.folderHistory[t+1]:null},l={};return l.addFolder=i,l.getPrevFolder=a,l}angular.module("historyService",[]).service("historyService",e),e.$inject=["dataService","$log"]}(),function(){"use strict";function e(){var e={},t=function(t){return t.TRIGGER_DIGEST="TRIGGER_DIGEST",t.OPEN_COPY_DLG="OPEN_COPY_DLG",t.OPEN_MOVE_DLG="OPEN_MOVE_DLG",t.OPEN_MKDIR_DLG="OPEN_MKDIR_DLG",t.OPEN_DELETE_DLG="OPEN_DELETE_DLG",t.ADD_NEW_TAB="ADD_NEW_TAB",t.REMOVE_TAB="REMOVE_TAB",t.SELECT_RIGHT_PANEL="SELECT_RIGHT_PANEL",t.SELECT_LEFT_PANEL="SELECT_LEFT_PANEL",t.TOGGLE_PANEL="TOGGLE_PANEL",t.OPEN_CHDIR_DLG="OPEN_CHDIR_DLG",t.OPEN_GOTO_ANYTHING_DLG="OPEN_GOTO_ANYTHING_DLG",t.OPEN_JOB_QUEUE_DLG="OPEN_JOB_QUEUE_DLG",t.OPEN_MULTIRENAME_DLG="OPEN_MULTIRENAME_DLG",t.OPEN_RENAME_DLG="OPEN_RENAME_DLG",t.COPY_2_CLIPBOARD_FULLNAMES="COPY_2_CLIPBOARD_FULLNAMES",t.COPY_2_CLIPBOARD_NAMES="COPY_2_CLIPBOARD_NAMES",t.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON="COPY_2_CLIPBOARD_FULLNAMES_AS_JSON",t.COPY_2_CLIPBOARD_NAMES_AS_JSON="COPY_2_CLIPBOARD_NAMES_AS_JSON",t.OPEN_FIND_DLG="OPEN_FIND_DLG",t.OPEN_DROP_DLG="OPEN_DROP_DLG",t.OPEN_GROUPFILES_DLG="OPEN_GROUPFILES_DLG",t.OPEN_FIND_DUBLICATES_DLG="OPEN_FIND_DUBLICATES_DLG",t.OPEN_SELECT_DLG="OPEN_SELECT_DLG",t.OPEN_DESELECT_DLG="OPEN_DESELECT_DLG",t.OPEN_DELETE_EMPTY_FOLDERS_DLG="OPEN_DELETE_EMPTY_FOLDERS_DLG",t.OPEN_COLORCONFIG_DLG="OPEN_COLORCONFIG_DLG",t.TOGGLE_SELECTION="TOGGLE_SELECTION",t.SELECT_ALL="SELECT_ALL",t.DESELECT_ALL="DESELECT_ALL",t.ENHANCE_SELECTION="ENHANCE_SELECTION",t.REDUCE_SELECTION="REDUCE_SELECTION",t.NAVIGATE_LEVEL_DOWN="NAVIGATE_LEVEL_DOWN",t.NAVIGATE_BACK="NAVIGATE_BACK",t.SAVE_CONFIG="SAVE_CONFIG",t.RELOAD_DIR="RELOAD_DIR",t.ENTER_PRESSED="ENTER_PRESSED",t.HOME_PRESSED="HOME_PRESSED",t.SPACE_PRESSED="SPACE_PRESSED",t.END_PRESSED="END_PRESSED",t.PAGEUP_PRESSED="PAGEUP_PRESSED",t.PAGEDOWN_PRESSED="PAGEDOWN_PRESSED",t.TOGGLE_SELECTION_CURRENT_ROW="TOGGLE_SELECTION_CURRENT_ROW",t.DUMMY_ACTION="DUMMY_ACTION",e};return t(e),e.applyConstants=t,e}angular.module("fnfConstants",[]).factory("constantsService",e),e.$inject=[]}(),function(){"use strict";function e(e){e.info("dataService...");var t={initial:null,activePanelIndex:0,tools:[],folderHistory:[],folderLatestAdded:[],favs:[],shortcutsconfig:null,color:null},o=function(){return t},n=function(o){t.initial=o,e.info("dataService.setInitialLoad() / data",t),e.info("dataService.setInitialLoad() / data.initial",t.initial)},i={};return i.getData=o,i.setInitialLoad=n,i}angular.module("app").service("dataService",e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){var o={},n={},i=function(t,o){e(function(){r(t,o)})},r=function(e,i){i||(i=e);var r=o[e];if(r)for(var a=0;a<r.length;a++)r[a](i,e);else t.warn('notifyService: emit called for key "'+e+'" but no listeners registered yet.');return n},a=function(e,i){return e?(o[e]||(o[e]=[]),-1===o[e].indexOf(i)&&o[e].push(i),n):t.error("Error: NotifyService.addListener(key, listener): key is undefined!",e)},l=function(e,t){if(!o[e])return n;var i=o[e].indexOf(t);return i>-1&&o[e].splice(i,1),n},c=function(e){return o[e]=[],n},s=function(e){for(var t in o)if(o.hasOwnProperty(t)){var i=o[t].indexOf(e);i>-1&&o[t].splice(i,1)}return n};return n.$emit=i,n.emit=r,n.addListener=a,n.removeListener=l,n.removeListenerForAll=s,n.removeListenersForKey=c,n}angular.module("notify",[]).factory("notifyService",e),e.$inject=["$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("appKeyboardService...");var i={},r=e.register_combo,a=e.unregister_combo,l=[],c=/ [a-z0-9]+$/,s=function(e){for(var o=0;o<e.length;o++)!function(e){var o=this,n=e.shortcut.match(c),i={keys:e.shortcut,on_keydown:null,on_keyup:function(o){return t.emit(e.id),!1},on_release:null,"this":o,prevent_default:!n,prevent_repeat:!1,is_unordered:!1,is_counting:!1,is_exclusive:!n,is_solitary:!1,is_sequence:!1};l.push(i),r(i)}(e[o])},d=function(e){for(var t=0;t<e.length;t++)e[t].shortcut&&!function(e){var t=this,n=e.shortcut.match(c),i={keys:e.shortcut,on_keydown:null,on_keyup:function(t){return o.runTool(e),!1},on_release:null,"this":t,prevent_default:!n,prevent_repeat:!1,is_unordered:!1,is_counting:!1,is_exclusive:!n,is_solitary:!1,is_sequence:!1};l.push(i),r(i)}(e[t])},u=function(){for(var e=0;e<l.length;e++)a(l[e].keys)},f=function(){for(var e=0;e<l.length;e++)r(l[e])};return i.iam="appKeyboardService",i.unregisterMainShortcuts=u,i.reregisterMainShortcuts=f,i.addToolShortcuts=d,i.addMainMenuShortcuts=s,i.register_combo=r,i.unregister_combo=a,i}angular.module("app.keyboard",[]).factory("appKeyboardService",e),e.$inject=["keyboardService","notifyService","mainService","$log"]}(),function(){"use strict";function e(){var e=new window.keypress.Listener,t={};return t.simple_combo=e.simple_combo.bind(e),t.counting_combo=function(t,o){e.counting_combo(t,o)},t.sequence_combo=function(t,o){e.sequence_combo(t,o)},t.register_combo=function(t){e.register_combo(t)},t.register_many=function(t){e.register_many(t)},t.unregister_combo=function(t){e.unregister_combo(t)},t.unregister_many=function(t){e.unregister_many(t)},t.get_registered_combos=function(){return e.get_registered_combos()},t.reset=function(){e.reset()},t.listen=function(){e.listen()},t.stop_listening=function(){e.stop_listening()},t.destroy=function(){e.destroy()},t}angular.module("keyboard",[]).factory("keyboardService",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o,n,i,r,a,l,c,s,d,u){var f={},g=r.openFile,p=r.loadDirectory,m=t.getGridModelCount,v=t.getGridApi,b=o.getActiveTab,h=r.setFolder,S=c.getShortcutIds,E=l.addListener,_=n.setInitialLoad,D=e.initialLoad,O=s.getDefaultTools,y=n.getData(),C=function(e,o){t.autoFocusedCell(y.activePanelIndex)},N=function(){D(function(e){if(e.error)return u.error(e.error);var t,o=[];console.info("data.data",e.data),console.info(e.data.tools);var n=e.data.tools;if(n&&n.replaceDefaults)o=n.tools;else if(o=O({osx:e.data.osx,linux:e.data.linux,windows:e.data.windows}),n)for(var r=0;r<n.tools.length;r++){var l=n.tools[r];o.push(l)}if(angular.extend(y.tools,o),e.data.shortcutsconfig&&(y.shortcutsconfig=e.data.shortcutsconfig,c.setMapping(e.data.shortcutsconfig.mapping)),y.availableStyles=e.data.availableStyles,e.data.color&&(y.color=e.data.color,y.color.colors))for(var s in y.color.colors)document.documentElement.style.setProperty(s,y.color.colors[s]);if(e.data.config){var f=e.data.config;angular.extend(y,f)}else y.activePanelIndex=0;_(e.data);var D=e.data.startingPoints,N=S();for(t=0;t<N.length;t++)E(N[t],a.action);u.info(" _data.tools",y.tools),i.addToolShortcuts(y.tools),d(function(){y.configLoaded=!0;for(var t=0;t<m();t++)!function(t){if(e.data.config){var o=b(t).path;p(t,{path:o},C)}else{var n=(t+D.length-1)%D.length;p(t,{path:D[n]},C)}v(t).addEventListener("rowDoubleClicked",function(e){var o=e.data.dir+"/"+e.data.base;e.data.isDir?h(t,o):g(o)})}(t)})})};return f.init=N,f.iam="initService",f}angular.module("initService",[]).factory("initService",e),e.$inject=["fileSocketService","gridService","tabService","dataService","appKeyboardService","mainService","actionService","notifyService","shortcutService","toolService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("clipboardService...");var o={},n=e.getSelectedFiles,i=e.getFirstPossibleRow,r=function(){var e=n();if(0===e.length){var t=i();t&&e.push(t)}for(var o=[],r=0;r<e.length;r++)o[o.length]=e[r].base;return o.join("\n")},a=function(){var e=n();if(0===e.length){var t=i();t&&e.push(t)}for(var o=[],r=0;r<e.length;r++)o[o.length]=e[r].dir+"/"+e[r].base;return o.join("\n")},l=function(){f(r())},c=function(){f(JSON.stringify(r().split("\n"),null,2))},s=function(){f(a())},d=function(){f(JSON.stringify(a().split("\n"),null,2))},u=function(e){},f=function(e,o){if(t.info(e),o||(o=u),window.clipboardData)return window.clipboardData.setData("text",e),o(!0);if(document.execCommand&&document.queryCommandSupported("copy")){var n=g();n.text(e),n.focus().select();var i=document.execCommand("copy");if(n.remove(),i)return o(!0)}},g=function(){var e=angular.element('<textarea id="clipboard"></textarea>').css({width:0,height:0,opacity:0,position:"absolute",zindex:99123});return angular.element("body").append(e),e};return o.copyFullNames=s,o.copyNames=l,o.copyFullNamesAsJson=d,o.copyNamesAsJson=c,o.copy=f,o.iam="clipboardService",o}angular.module("clipboardService",[]).factory("clipboardService",e),e.$inject=["mainService","$log"]}(),function(){"use strict";function e(e,t){t.info("actionLabelMappingService...");var o={};o[e.COPY_2_CLIPBOARD_FULLNAMES]="Copy full names to clipboard",o[e.COPY_2_CLIPBOARD_NAMES]="Copy names to clipboard",o[e.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON]="Copy full names to clipboard as JSON",o[e.COPY_2_CLIPBOARD_NAMES_AS_JSON]="Copy names to clipboard as JSON",o[e.OPEN_COPY_DLG]="Copy",o[e.OPEN_MOVE_DLG]="Move",o[e.OPEN_MKDIR_DLG]="Create Dir",o[e.OPEN_DELETE_DLG]="Delete",o[e.SELECT_LEFT_PANEL]="Left Panel",o[e.SELECT_RIGHT_PANEL]="Right Panel",o[e.TOGGLE_PANEL]="Toggle Panel",o[e.ADD_NEW_TAB]="Add Tab",o[e.REMOVE_TAB]="Remove Tab",o[e.OPEN_GOTO_ANYTHING_DLG]="Go to anything...",o[e.SAVE_CONFIG]="Save Config",o[e.OPEN_GROUPFILES_DLG]="Group Files...",o[e.OPEN_CHDIR_DLG]="Change Dir...",o[e.OPEN_FIND_DUBLICATES_DLG]="Find Dublicates...",o[e.OPEN_MULTIRENAME_DLG]="Multi Rename...",o[e.OPEN_RENAME_DLG]="Rename...",o[e.OPEN_DELETE_EMPTY_FOLDERS_DLG]="Delete Empty Folders...",o[e.OPEN_FIND_DLG]="Find...",o[e.RELOAD_DIR]="Reload...",o[e.OPEN_SELECT_DLG]="Enhance Selection...",o[e.SELECT_ALL]="Select All",o[e.SELECT_ALL]="Select All",o[e.OPEN_DESELECT_DLG]="Reduce Selection...",o[e.DESELECT_ALL]="Deselect All",o[e.TOGGLE_SELECTION]="Toggle Selection",o[e.NAVIGATE_LEVEL_DOWN]="Parent Dir",o[e.NAVIGATE_BACK]="History Back",o[e.NAVIGATE_LEVEL_DOWN]="Parent Dir",o[e.NAVIGATE_BACK]="History Back",o[e.OPEN_COLORCONFIG_DLG]="Color Config...";var n=function(e){var n=o[e];return n||t.warn("No label for "+e),n};return{getLabelForAction:n}}angular.module("actionLabelMappingService",[]).factory("actionLabelMappingService",e),e.$inject=["constantsService","$log"]}(),function(){"use strict";function e(e,t,o){var n=[],i=t.getLabelForAction,r=function(){for(var e=[],t=0;t<n.length;t++)e.push(n[t].id);return e},a=function(e){for(var t=0;t<n.length;t++){var o=n[t];if(o.id===e)return o.shortcut}return null},l=function(e){return e?"<kbd>"+e.split(" ").join("</kbd> <kbd>")+"</kbd>":""},c=function(e){var t=a(e);return s(t)},s=function(e){return e?e.toUpperCase().replace(/_/g," ").replace(/SUBTRACT/g,"-").replace(/MULTIPLY/g,"*").replace(/CMD/g,"&#x2318;").replace(/ENTER/g,"&#x23CE;").replace(/RETURN/g,"&#x23CE;").replace(/CTRL/g,"⌃").replace(/CONTROL/g,"&#x2303;").replace(/OPTION/g,"&#x2325;").replace(/SHIFT/g,"&#8679;").replace(/ADD/g,"+").replace(/NUM/g,"num").replace(/ALT/g,"alt"):void 0},d=function(e){var t=a(e);if(t)return t.toUpperCase().replace(/ /g,"-").replace(/\+/g,"-").replace(/CTRL/g,"Ctrl").replace(/CMD/g,"cmd").replace(/ALT/g,"Alt").replace(/SHIFT/g,"Shift")},u=function(){o.info("ShortcutService> init."),e.addMainMenuShortcuts(n)},f=function(){return n},g=function(e){n=e,u()};return{kbdHtml:l,setMapping:g,getMapping:f,getShortcutIds:r,getShortcutByActionId:d,getLabelForAction:i,printShortcutByActionId:c,printShortcut:s}}angular.module("shortcutService",[]).factory("shortcutService",e),e.$inject=["appKeyboardService","actionLabelMappingService","$log"]}(),function(){"use strict";function e(e,t){t.info("dialogActionMappingService...");var o={};e.applyConstants(o);var n={};n[o.OPEN_DROP_DLG]={id:"fnf-drop-dialog",url:"/fnf/drop/dialog.html"},n[o.OPEN_CHDIR_DLG]={id:"fnf-chdir-dialog",url:"/fnf/commands/chdir/dialog.html"},n[o.OPEN_JOB_QUEUE_DLG]={id:"fnf-jobqueue-dialog",url:"/fnf/action/jobqueue/dialog.html"},n[o.OPEN_GOTO_ANYTHING_DLG]={id:"fnf-gotoanything-dialog",url:"/fnf/action/gotoanything/dialog.html",nocache:!0},n[o.OPEN_MULTIRENAME_DLG]={id:"fnf-multirename-dialog",url:"/fnf/commands/multirename/dialog.html"},n[o.OPEN_RENAME_DLG]={id:"fnf-rename-dialog",url:"/fnf/commands/rename/dialog.html",nocache:!0},n[o.OPEN_DELETE_EMPTY_FOLDERS_DLG]={id:"fnf-delete-empty-folders-dialog",url:"/fnf/commands/deleteemptyfolders/dialog.html",nocache:!0},n[o.OPEN_FIND_DLG]={id:"fnf-find-action-dialog",url:"/fnf/commands/find/dialog.html",nocache:!0},n[o.OPEN_DELETE_DLG]={id:"fnf-delete-action-dialog",url:"/fnf/commands/delete/dialog.html",nocache:!0},n[o.OPEN_COPY_DLG]={id:"fnf-copy-action-dialog",url:"/fnf/commands/copy/dialog.html",nocache:!0},n[o.OPEN_MOVE_DLG]={id:"fnf-move-action-dialog",url:"/fnf/commands/move/dialog.html",nocache:!0},n[o.OPEN_MKDIR_DLG]={id:"fnf-mkdir-action-dialog",url:"/fnf/commands/mkdir/dialog.html",nocache:!0},n[o.OPEN_FIND_DUBLICATES_DLG]={id:"fnf-finddublicates-dialog",url:"/fnf/commands/finddublicates/dialog.html"},n[o.OPEN_GROUPFILES_DLG]={id:"fnf-groupfiles-dialog",url:"/fnf/commands/groupfiles/dialog.html",nocache:!0},n[o.OPEN_SELECT_DLG]={id:"fnf-selection-dialog",url:"/fnf/commands/select/selectdialog.html"},n[o.OPEN_DESELECT_DLG]={id:"fnf-deselection-dialog",url:"/fnf/commands/select/deselectdialog.html"},n[o.OPEN_COLORCONFIG_DLG]={id:"fnf-colorconfig-dialog",url:"/fnf/config/color/dialog.html",nocache:!0};var i=function(e){return n[e]};return o.iam="dialogActionMappingService",o.getDialogMetaData=i,o}angular.module("dialogActionMappingService",[]).factory("dialogActionMappingService",e),e.$inject=["constantsService","$log"]}(),function(){"use strict";function e(e,t,o,n,i,r){var a={},l=function(){var e="function"==typeof Date.now?Date.now():(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?o:7&o|8).toString(16)});return t},c=function(e,t){if(t=angular.isString(e)?{url:e}:e,t||(t={backdrop:"static"}),t.id||(t.id="dialog-"+l()),!t.url)throw Error("DialogService.open(...): url is missing!");var o=s(t),r={keys:"control enter",on_keydown:function(){1===o.find("[fnf-click-on-ctrl-enter]").length?o.find("[fnf-click-on-ctrl-enter]").click():1===o.find(".btn-primary").length&&o.find(".btn-primary").click()},prevent_default:!0,is_exclusive:!0};return o.on("show.bs.modal",function(){t.onShow&&t.onShow(o)}),o.on("shown.bs.modal",function(){$(":input[autofocus]",this).focus(),t.onShown&&t.onShown(o),n.unregisterMainShortcuts(),n.register_combo(r),o.find("[fnf-click-on-ctrl-enter]").attr("title","Press Ctrl-Enter"),o.find("[data-dismiss]").attr("title","Press ESC")}),o.on("hidden.bs.modal",function(){t.onHidden&&t.onHidden(o),i.info("modal closed.",t.id),n.unregister_combo(r.keys),n.reregisterMainShortcuts(),t.nocache&&o.parent().remove()}),o.modal(t),o},s=function(n){var r=n.id,l=n.url,c=n.nocache?!0:!1;if(!c&&a[r])return i.info("from map ",r),a[r];$("body").append('<div id="'+r+'"></div>');var s=$("#"+r),d=t.get(l);s.append(d);var u=s.html(d).scope();o(s)(u||e);var f=$("#"+r+" div:first");return a[r]=f,f},d={};return d.iam="dialogService",d.openAndCompile=c,d}angular.module("dialogService",[]).factory("dialogService",e),e.$inject=["$rootScope","$templateCache","$compile","appKeyboardService","$log","$timeout"]}(),function(){"use strict";function e(e,t,o,n,i,r,a,l,c,s,d,u,f,g){var p={},m=(e.getData(),l.loadDirectory),v=c.selectPanel,b=c.selectLeftPanel,h=c.selectRightPanel,S=c.togglePanel,E=s.getTargetPanelIndex,_=s.getTargetDir,D=s.getSourcePanelIndex,O=s.getSourceDir,y=n.getDialogMetaData,C=o.openAndCompile,N=r.selectAll,L=r.deselectAll,A=r.toggleSelection,T=i.saveconfig,x=s.addNewTabOnActivePanel,k=s.removeTabOnActivePanel,P=s.navigateBack,I=s.navigateDown,w=s.onEnterPressed,R=d.calcSumsForSelectedRow,$=s.onHomePressed,F=s.onEndPressed,M=s.onPageUpPressed,G=s.onPageDownPressed,U=s.toggleCurrentRow,j=u.copyNames,H=u.copyFullNames,z=u.copyNamesAsJson,B=u.copyFullNamesAsJson;t.applyConstants(p);var W=function(e){var t=y(e);return t?(t.onShow=function(){a.$emit(e+"_ON_SHOW",t.id)},t.onShown=function(){a.$emit(e+"_ON_SHOWN",t.id)},t.onHidden=function(){a.$emit(e+"_ON_HIDDEN",t.id)},g.info("ActionService.openDialog()",e),void C(t)):g.warn("ActionService.openDialog("+e+'): No dialog data found for "'+e+'"!')},K=function(){f(function(){var e=function(){v(t)},t=D();m(E(),{path:_(),nocache:!0},e),m(t,{path:O(),nocache:!0},e)})},V=function(e){return e===p.COPY_2_CLIPBOARD_FULLNAMES?H():e===p.COPY_2_CLIPBOARD_NAMES?j():e===p.COPY_2_CLIPBOARD_FULLNAMES_AS_JSON?B():e===p.COPY_2_CLIPBOARD_NAMES_AS_JSON?z():e===p.TOGGLE_SELECTION_CURRENT_ROW?U():e===p.SPACE_PRESSED?R():e===p.ENTER_PRESSED?w():e===p.HOME_PRESSED?$():e===p.END_PRESSED?F():e===p.PAGEUP_PRESSED?M():e===p.PAGEDOWN_PRESSED?G():e===p.RELOAD_DIR?K():e===p.TOGGLE_PANEL?S():e===p.SELECT_RIGHT_PANEL?h():e===p.SELECT_LEFT_PANEL?b():e===p.SAVE_CONFIG?T():e===p.SELECT_ALL?N():e===p.DESELECT_ALL?L():e===p.TOGGLE_SELECTION?A():e===p.ADD_NEW_TAB?x():e===p.REMOVE_TAB?k():e===p.NAVIGATE_BACK?P():e===p.NAVIGATE_LEVEL_DOWN?I():0===e.indexOf("OPEN_")?W(e):void("DUMMY_ACTION"!==e&&g.warn("No action found for: ",e))};return p.action=V,p.iam="actionService",p}angular.module("actionService",[]).factory("actionService",e),e.$inject=["dataService","constantsService","dialogService","dialogActionMappingService","configService","selectionService","notifyService","folderService","tabService","mainService","deepSumSizeService","clipboardService","$timeout","$log"]}(),function(){"use strict";function e(e,t){var o=0,n=function(o,n){var i={},r=function(){return o},a=function(i){var r=o.action.toLowerCase();o.id=n;var a=r+o.id;t.info("Executor.executing ",a),e.on(a,function(o){e.removeListener(a),t.info("Executor.done      ",a),i(o.error,o.events)}),e.emit(r,o)};return i.execute=a,i.getAction=r,i},i=function(e){return new n(e,o++)},r={};return r.create=i,r}angular.module("executorFactory",[]).factory("executorFactory",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,o,n){var i,r={},a=[],l=0,c=function(){a.push({status:r.QUEUE_STATUS_IDLE,actions:[],jobId:0,progress:{unfinished:0,finished:0,errors:0,"class":"text-muted",getInfoText:function(){return this.finished+" / "+(this.finished+this.unfinished)}}})},s=function(e){return g(e).status},d=function(e){return g(e).progress},u=function(){for(var e=0;e<a.length;e++){var t=a[e],n=t.progress;n.unfinished=0,n.finished=0,n.errors=0;for(var i=t.jobId,l=t.actions,c=0;c<l.length;c++){var s=l[c];s.jobId>=i&&(s.status===r.ACTION_STATUS_NEW||s.status===r.ACTION_STATUS_PENDING||s.status===r.ACTION_STATUS_PROCESSING?n.unfinished++:n.finished++,s.status===r.ACTION_STATUS_ERROR&&n.errors++)}n.finished>0&&0===n.unfinished?n["class"]="font-weight-bold text-success":n.unfinished>0?n["class"]="text-info":n.errors?n["class"]="font-weight-bold text-danger":n["class"]="text-muted"}o(f,16)},f=function(){},g=function(e){if(e||(e=0),e>a.length)throw new Error("Error: getQueue(queueIndex) queueIndex is "+e+" but queues.length is "+a.length+"!");return e===a.length&&c(),a[e]},p=function(e,t){var o=g(t);e.status=r.ACTION_STATUS_NEW,e.jobId=++l,o.actions.push(e),o.jobId=l,h()},m=function(e,t){l++;var o=g(t);o.jobId=l;for(var n=0;n<e.length;n++){var i=e[n];i.status=r.ACTION_STATUS_NEW,i.jobId=l,o.actions.push(i)}h()},v=function(){t.emit(r.REFRESH_JOB_QUEUE_TABLE,"")},b=function(){u(),i&&o.cancel(i),i=o(v,1111)},h=function(){u();for(var e=0;e<a.length;e++){var t=a[e];t.status===r.QUEUE_STATUS_IDLE&&S(t)}},S=function E(o){o||(o=g(0));for(var n=0;n<o.actions.length;n++){var i=o.actions[n];if(i.status===r.ACTION_STATUS_NEW){if(o.status=r.QUEUE_STATUS_RUNNING,i.status=r.ACTION_STATUS_PROCESSING,i.action!==r.ACTION_REFRESH_PANEL){var a=e.create(i);return void function(e){e.execute(function(n,i){if(n)o.status=r.QUEUE_STATUS_ERROR,e.getAction().status=r.ACTION_STATUS_ERROR;else{if(o.status=r.QUEUE_STATUS_IDLE,e.getAction().status=r.ACTION_STATUS_SUCCESS,!e.getAction().bulk&&i)for(var a=0;a<i.length;a++){var l=i[a];t.emit(l.event,l)}E(o)}b()})}(a)}i.status=r.ACTION_STATUS_SUCCESS,t.emit(r.ACTION_REFRESH_PANEL,{index:i.panelIndex}),b()}}o.status=r.QUEUE_STATUS_IDLE};return r.QUEUE_STATUS_IDLE="IDLE",r.QUEUE_STATUS_RUNNING="RUNNING",r.QUEUE_STATUS_ERROR="ERROR",r.ACTION_STATUS_NEW="NEW",r.ACTION_STATUS_PENDING="PENDING",r.ACTION_STATUS_PROCESSING="PROCESSING",r.ACTION_STATUS_ERROR="ERROR",r.ACTION_STATUS_WARNING="WARNING",r.ACTION_STATUS_SUCCESS="SUCCESS",r.ACTION_STATUS_ABORT="ABORT",r.ACTION_REFRESH_PANEL="REFRESH_PANEL",r.ACTION_MKDIR="MKDIR",r.ACTION_COPY="COPY",r.ACTION_MOVE="MOVE",r.ACTION_REMOVE="REMOVE",r.ACTION_DELEMPTY="DELEMPTY",r.ACTION_RENAME="RENAME",r.REFRESH_JOB_QUEUE_TABLE="REFRESH_JOB_QUEUE_TABLE",r.addAction=p,r.addActions=m,r.getQueue=g,r.getQueueStatus=s,r.next=S,r.getQueueProgress=d,r}angular.module("actionQueueService",[]).factory("actionQueueService",e),e.$inject=["executorFactory","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t){t.info("JobQueueController...");var o=this;o.gridOptions=e.getGridOptions(),o.restartVisible=e.restartVisible,o.next=e.next,o.getQueueStatus=e.getQueueStatus}angular.module("JobQueueController",[]).controller("JobQueueController",e),e.$inject=["jobService","$log"]}(),function(){"use strict";function e(e){var t=function(){var t=function(e){if(!e)return"";if(!e.data)return"";var t=e.value.replace(e.data.ext,"");return"ERROR"===t?'<i class="text-danger"><i class="fa fa-exclamation-triangle"></i> '+t+"</i>":"SUCCESS"===t?'<i class="text-success"><i class="fa fa-check-circle-o"></i> '+t+"</i>":"PROCESSING"===t?'<i class="text-primary"><i class="fa fa-cogs"></i> '+t+"</i>":'<i class="fa fa-check-circle-o"></i> '+t},o=[{headerName:"",field:"id",width:60,sort:"desc",icons:e.ALPHA_ICONS},{headerName:"Job",field:"jobId",width:60,icons:e.ALPHA_ICONS},{headerName:"Status",field:"status",width:100,icons:e.TEXT_SORT_ICONS,cellRenderer:t},{headerName:"Action",field:"action",width:110,icons:e.TEXT_SORT_ICONS},{headerName:"Source",field:"src",width:500,icons:e.TEXT_SORT_ICONS,cellRenderer:e.fileCellRenderer},{headerName:"Target",field:"target",width:600,icons:e.TEXT_SORT_ICONS,cellRenderer:e.fileCellRenderer}],n=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},i={headerHeight:30,rowHeight:23,columnDefs:o,rowSelection:"multiple",rowDeselection:!0,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS,onCellFocused:n};return i};return{getOptions:function(){return new t}}}angular.module("jobQueueGridOptionsFactory",[]).factory("jobQueueGridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("jobService...");var r=e.getOptions(),a=t.getQueue(0),l=t.next,c=t.getQueueStatus,s=function(){return c(0)===t.QUEUE_STATUS_ERROR};r.rowData=a.actions;var d=function(){return r},u=null,f=function(){null!==u&&n.cancel(u),u=n(g,1234)},g=function(){i.info("gridOptions",r),r.api&&(r.api.setRowData(a.actions),r.api.refreshView())};o.addListener(t.REFRESH_JOB_QUEUE_TABLE,f),g();var p={};return p.getQueueStatus=c,p.getGridOptions=d,p.next=l,p.restartVisible=s,p}angular.module("jobService",[]).factory("jobService",e),e.$inject=["jobQueueGridOptionsFactory","actionQueueService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("GotoAnythingController...");var i=this;i.execute=function(){e.execute(i.selected)},i.selected=void 0,i.commands=e.getCommands()}angular.module("GotoAnythingController",[]).controller("GotoAnythingController",e),e.$inject=["gotoAnythingService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n,i,r,a){a.info("gotoAnythingService..."),e.put("uib/template/typeahead/typeahead-match.html",'<div tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></div>'),e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="list-group dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="list-group-item" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n');var l=function(e){e.tool?i.runTool(e.tool):e.item&&r.emit(e.item.id),a.info("Unknown object:",e)},c=[],s=function(){return c},d=function(e){for(var t=0;t<c.length;t++)if(c[t].label===e)return!0;return!1};!function(){var e,i=t.getMapping();for(e=0;e<i.length;e++){var r=i[e],a=o.getLabelForAction(r.id),l=r.shortcut;l||(l=""),a&&(d(a)||c.push({label:a,item:r}))}var s=n.getData().tools;for(e=0;e<s.length;e++)d(s[e].label)||c.push({label:s[e].label,tool:s[e]})}();var u={};return u.iam="gotoAnythingService",u.getCommands=s,u.execute=l,u}angular.module("gotoAnythingService",[]).factory("gotoAnythingService",e),e.$inject=["$templateCache","shortcutService","actionLabelMappingService","dataService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t){t.info("shellActionService...");var o=function(o){t.info("shellActionService.execute()",o),e.emit("shell",o,function(e,o){e&&t.error(e)})},n={};return n.execute=o,n}angular.module("shellActionService",[]).factory("shellActionService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t){t.info("openfileActionService...");var o=function(o){e.emit("open",o,function(e,o){e&&t.error(e)})},n={};return n.openFile=o,n}angular.module("openfileActionService",[]).factory("openfileActionService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("commandService...");var n=e.addActions,i=0,r=function(e,t,o,n,r){return{id:i++,panelIndex:n,action:e,src:t,target:o,status:g.ACTION_STATUS_NEW,bulk:r}},a=function(t){return r(e.ACTION_REFRESH_PANEL,"","",t,!1)},l=function(t){return r(e.ACTION_MKDIR,{},{dir:t.dir,base:t.base},t.panelIndex)},c=function(o){var n=o.src,i=o.srcPanelIndex;return o.bulk||t.emit("update",{event:"update",panelIndex:i,item:{dir:n.dir,base:n.base,status:"temp"}}),r(e.ACTION_REMOVE,n,null,i,o.bulk)},s=function(t){return r(e.ACTION_DELEMPTY,t.src,null,t.srcPanelIndex,!1)},d=function(o){var n=o.src,i=o.srcPanelIndex,a=o.target,l=o.targetPanelIndex;return o.bulk||void 0==l||t.emit("created",{event:"created",panelIndex:l,item:{dir:a.dir,base:a.base,status:"temp"}}),r(e.ACTION_COPY,n,a,i,o.bulk)},u=function(n){o.info("commandService.move()  !bulk: ",!n.bulk);var i=n.src,a=n.srcPanelIndex,l=n.target,c=n.targetPanelIndex;return n.bulk||(void 0!=a&&t.emit("update",{event:"update",panelIndex:a,item:{dir:i.dir,base:i.base,status:"temp"}}),void 0!=c&&t.emit("created",{event:"created",panelIndex:c,item:{dir:l.dir,base:l.base,status:"temp"}})),r(e.ACTION_MOVE,i,l,a,n.bulk)},f=function(n){o.info("commandService.move()  !bulk: ",!n.bulk);var i=n.src,a=n.srcPanelIndex,l=n.target;return n.bulk||void 0!=a&&t.emit("update",{event:"update",panelIndex:a,item:{dir:i.dir,base:i.base,status:"temp"}}),r(e.ACTION_RENAME,i,l,a,n.bulk)},g={};return g.BULK_LOWER_LIMIT=30,g.addActions=n,g.del=c,g.delempty=s,g.copy=d,g.move=u,g.rename=f,g.mkdir=l,g.refreshPanel=a,g}angular.module("commandService",[]).factory("commandService",e),e.$inject=["actionQueueService","notifyService","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("ChdirActionController...");var i=e.setFolder,r=this;r.gridOptions=e.getGridOptions(),r.running=!1,r.chdirClicked=function(){var e=s();e&&i(e.name)};var a,l=function(){var e=r.gridOptions.api.getSelectedRows();return e.length>0?e[0]:null},c=function(){var e=r.gridOptions.api.getFocusedCell();return e?e.node.data:null},s=function(){var e=l();if(e)return e;if(e=c())return e;var t=r.gridOptions.api.grid.gridOptions.rowData;return t&&t.length>0?t[0]:null},d=function(){r.running=!0,r.gridOptions.api.setRowData([]),r.gridOptions.api.addEventListener("rowDoubleClicked",function(e){i(e.data.name),$('button[data-dismiss="modal"]').click()});var t=[],l=Date.now();a=e.startWalking(function(e){e&&(e.end?o(function(){n.info("walk ended.",a),r.running=!1,r.gridOptions.api.setRowData(t)}):(t.push({name:e}),Date.now()-l>2e3&&(l=Date.now(),r.gridOptions.api.setRowData(t))))})};r.cancelWalk=function(){e.cancelWalk(a),r.running=!1},t.removeListenersForKey("OPEN_CHDIR_DLG_ON_SHOW").removeListenersForKey("OPEN_CHDIR_DLG_ON_SHOWN").removeListenersForKey("OPEN_CHDIR_DLG_ON_HIDDEN").addListener("OPEN_CHDIR_DLG_ON_SHOW",d).addListener("OPEN_CHDIR_DLG_ON_HIDDEN",r.cancelWalk)}angular.module("ChdirActionController",[]).controller("ChdirActionController",e),e.$inject=["chdirActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("chdirActionService...");var i=e.getOptions,r=(t.getTargetDir,t.getSourceDir),a=0,l=o.on,c=o.removeListener,s=o.emit,d=function(e){n.info("cancelWalk()",e),s("walkfolder",{cancelled:!0,rid:e})},u=function(e){a++,n.info("startWalking()",a);var t="walkfolder"+a;return l(t,function(t){e&&e(t)}),s("walkfolder",{dir:r(),rid:a}),a},f=function(e){t.setFolder(t.getSourcePanelIndex(),e)},g={};return g.getGridOptions=i,g.startWalking=u,g.cancelWalk=d,g.removeListener=c,g.setFolder=f,g}angular.module("chdirActionService",[]).factory("chdirActionService",e),e.$inject=["chdirGridOptionsFactory","mainService","socketService","$log"]}(),function(){"use strict";function e(e){var t=function(){var t=[{headerName:"Directory",field:"name",width:1200,icons:e.TEXT_SORT_ICONS}],o=function(e){var t=e.rowIndex;$(".ag-row-focus",this.api.grid.gridPanel.eBodyContainer).removeClass("ag-row-focus"),$('.ag-row[row="'+t+'"]',this.api.grid.gridPanel.eBodyContainer).addClass("ag-row-focus")},n={quickFilterText:"",headerHeight:30,rowHeight:23,columnDefs:t,rowSelection:"single",rowDeselection:!0,enableColResize:!0,enableSorting:!0,icons:e.ICONS,onCellFocused:o};return n};return{getOptions:function(){return new t}}}angular.module("chdirGridOptionsFactory",[]).factory("chdirGridOptionsFactory",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t){var o=0,n=e.on,i=e.removeListener,r=e.emit,a=function(){t.info("searchService init...")},l=function(e){r("search",{cancelled:!0,rid:e})},c=function(e,t){var a=e.pathes;a&&0!==a.length||t("Folder is missing",0,!0),o++;var l="search"+o;return n(l,function(e){
e.base&&t(e,!1),e.end&&(i(l),t(null,!0))}),r("search",{filter:e,rid:o}),o},s={};return s.init=a,s.search=c,s.cancelSearch=l,s}angular.module("searchService",[]).factory("searchService",e),e.$inject=["socketService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("deleteActionService...");var n=e.getSelectedFilesAndFolders,i=e.getSourcePanelIndex,r=function(){for(var o=[],r=i(),a=n(),l=0;l<a.length;l++)o.push(t.del({bulk:a.length>t.BULK_LOWER_LIMIT,src:a[l],srcPanelIndex:r}));e.storeLastRowIndex(),o.push(t.refreshPanel(r)),t.addActions(o)},a={};return a.callDelete=r,a}angular.module("deleteActionService",[]).factory("deleteActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("DeleteActionController...");var r=this;r.sourceText="",r.okEnabled=!1,r.scanning=!1,r.sum=0,r.callDelete=function(){t.callDelete()};var a,l=function(e,t,o){n(function(){r.scanning=!o,r.sum=t,r.sourceText=e,r.okEnabled=!0})},c=function(){r.sourceText="",r.okEnabled=!1,r.scanning=!1,r.sum=0,a=e.walkSelected(l)},s=function(){e.cancelWalk(a)};o.removeListenersForKey("OPEN_DELETE_DLG_ON_SHOW").removeListenersForKey("OPEN_DELETE_DLG_ON_SHOWN").removeListenersForKey("OPEN_DELETE_DLG_ON_HIDDEN").addListener("OPEN_DELETE_DLG_ON_SHOW",c).addListener("OPEN_DELETE_DLG_ON_HIDDEN",s)}angular.module("DeleteActionController",[]).controller("DeleteActionController",e),e.$inject=["deepSelectionService","deleteActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o){o.info("deleteEmptyFoldersActionService...");var n=e.getSourcePanelIndex,i=function(e){var o=n();t.addActions([t.delempty({src:{dir:e,base:""},srcPanelIndex:o}),t.refreshPanel(o)])},r={};return r.callDeleteEmptyFolders=i,r}angular.module("deleteEmptyFoldersActionService",[]).factory("deleteEmptyFoldersActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("DeleteEmptyFoldersActionController...");var i=this;i.sourceText="",i.okEnabled=!1,i.callDeleteEmptyFolders=function(){e.callDeleteEmptyFolders(i.sourceText)};var r=function(){i.sourceText=t.getSourceDir(),i.okEnabled=!0};o.removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOW").removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOWN").removeListenersForKey("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_HIDDEN").addListener("OPEN_DELETE_EMPTY_FOLDERS_DLG_ON_SHOW",r)}angular.module("DeleteEmptyFoldersActionController",[]).controller("DeleteEmptyFoldersActionController",e),e.$inject=["deleteEmptyFoldersActionService","mainService","notifyService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("copyActionService...");var n=e.getTargetDir,i=e.getSourcePanelIndex,r=e.getTargetPanelIndex,a=e.getPossibleTargetFolders,l=e.slash,c=e.getRowsForAction,s=function(e){var o,n,a,s=l(e),d=[],u=c(),f=i(),g=r();for(o=0;o<u.length;o++)n={dir:l(u[o].dir),base:u[o].base},a={dir:s,base:u[o].base},d.push(t.copy({bulk:u.length>t.BULK_LOWER_LIMIT,src:n,srcPanelIndex:f,target:a,targetPanelIndex:g}));d.push(t.refreshPanel(g)),t.addActions(d)},d={};return d.getTargetDir=n,d.getPossibleTargetFolders=a,d.getRowsForAction=c,d.copy=s,d}angular.module("copyActionService",[]).factory("copyActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("CopyActionController...");var r=this;r.getPossibleTargetFolders=t.getPossibleTargetFolders,r.targetDir=t.getTargetDir(),r.optionsVisible=!1,r.sourceText="",r.okEnabled=!1,r.scanning=!1,r.sum=0,r.toggleOptions=function(){r.optionsVisible=!r.optionsVisible},r.setTargetDir=function(e){r.targetDir=e},r.copy=function(){t.copy(r.targetDir)};var a,l=function(e,o,i){n(function(){r.scanning=!i,r.sum=o,r.sourceText=e,r.okEnabled=t.getRowsForAction()})},c=function(){r.okEnabled=!1,r.sourceText="",r.scanning=!1,r.sum=0,r.targetDir=t.getTargetDir(),a=e.walkSelected(l)},s=function(){e.cancelWalk(a)};o.removeListenersForKey("OPEN_COPY_DLG_ON_SHOW").removeListenersForKey("OPEN_COPY_DLG_ON_SHOWN").removeListenersForKey("OPEN_COPY_DLG_ON_HIDDEN").addListener("OPEN_COPY_DLG_ON_SHOW",c).addListener("OPEN_COPY_DLG_ON_HIDDEN",s)}angular.module("CopyActionController",[]).controller("CopyActionController",e),e.$inject=["deepSelectionService","copyActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("groupfilesActionService...");var r=(e.getTargetDir,e.getSourceDir,e.getSourcePanelIndex),a=e.getTargetPanelIndex,l=e.getSelectedFilesAndFolders,c=[],s=[{headerName:"No",field:"id",width:60,icons:t.ALPHA_ICONS},{headerName:"Source",field:"base",width:300,icons:t.TEXT_SORT_ICONS},{headerName:"Group",field:"dir",width:200,sort:"asc",icons:t.TEXT_SORT_ICONS},{headerName:"Target",field:"target",width:800,icons:t.TEXT_SORT_ICONS,cellRenderer:t.fileCellRenderer}],d={rowData:c,headerHeight:30,rowHeight:23,columnDefs:s,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:t.ICONS},u={gridOptions:d,modus:"runnig_number",newFolder:"",useSsourceDir:!1,groupCount:0,minsize:"2",ignoreBrackets:!0,okEnabled:!0,minsizes:[{value:"0",label:"none"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"10",label:"10"}],modes:[{value:"runnig_number",label:"Running number"},{value:"new_folder",label:"New folder (manually)"},{value:"minus_separator",label:"Minus separator"},{value:"first_word",label:"First word"},{value:"first_letter",label:"First letter"},{value:"first_letter_lower",label:"First letter lowercase"},{value:"first_letter_upper",label:"First letter uppercase"},{value:"two_letters",label:"Two letters"},{value:"two_letters_lower",label:"Two letters lowercase"},{value:"two_letters_upper",label:"Two letters uppercase"}]},f=function(){return u},g=function(e){var t=o.updateTableModel(e,l());return d.api.setRowData(t.rows),c=t.rows,t.groupCount},p=function(){var t,o,i=[],l=r(),s=a();for(t=0;t<c.length;t++)o=c[t],i.push(n.move({bulk:c.length>n.BULK_LOWER_LIMIT,src:o.src,srcPanelIndex:l,target:o.target,targetPanelIndex:s}));i.push(n.refreshPanel(l)),i.push(n.refreshPanel(s)),e.storeLastRowIndex(),n.addActions(i)},m=function(){var t,o,i=[],l=r(),s=a();for(t=0;t<c.length;t++)o=c[t],i.push(n.copy({bulk:c.length>n.BULK_LOWER_LIMIT,src:o.src,srcPanelIndex:l,target:o.target,targetPanelIndex:s}));i.push(n.refreshPanel(s)),e.storeLastRowIndex(),n.addActions(i)},v={};return v.move=p,v.copy=m,v.getDialogData=f,v.updateTableModel=g,v}angular.module("groupfilesActionService",[]).factory("groupfilesActionService",e),e.$inject=["mainService","gridiconService","groupfilesTableService","commandService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("GroupfilesActionController...");var n=this;n.data=e.getDialogData(),n.updateTableModel=function(){n.data.groupCount=e.updateTableModel({modus:n.data.modus,minsize:parseInt(n.data.minsize),ignoreBrackets:n.data.ignoreBrackets,newFolder:n.data.newFolder,useSsourceDir:n.data.useSsourceDir}),n.data.okEnabled=n.data.groupCount>0},n.move=e.move,n.copy=e.copy;var i=function(){o.info("init()..."),n.updateTableModel()};t.removeListenersForKey("OPEN_GROUPFILES_DLG_ON_SHOW").removeListenersForKey("OPEN_GROUPFILES_DLG_ON_SHOWN").removeListenersForKey("OPEN_GROUPFILES_DLG_ON_HIDDEN").addListener("OPEN_GROUPFILES_DLG_ON_SHOW",i)}angular.module("GroupfilesActionController",[]).controller("GroupfilesActionController",e),e.$inject=["groupfilesActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t){t.info("groupfilesTableService...");var o=e.getTargetDir,n=e.getSourceDir,i=function(e,t){var i,r=[],a=[],l=e.useSsourceDir?n():o(),c=0,s=e.twoLetters,d=s?2:1;for(i=0;i<t.length;i++){var u=t[i],f=u.base;e.ignoreBrackets&&(f=f.replace(/\[[\w\d\s]+\]/g,"").replace(/\([\w\d\s]+\)/g,"")),f=f.replace(/(^[\s_-]+|[\s_-]+$)/g,"").substr(0,d),e.lower&&(f=f.toLowerCase()),e.upper&&(f=f.toUpperCase()),f&&(-1===a.indexOf(f)&&a.push(f),r.push({id:c++,base:u.base,src:u,dir:f,target:{dir:l+"/"+f,base:u.base}}))}return{groupCount:a.length,rows:r}},r=function(e,t){var i,r,a=[],l={},c=e.minsize,s=e.useSsourceDir?n():o(),d=0,u=0;for(i=0;i<t.length;i++){var f=t[i],g=f.base,p=null;e.ignoreBrackets&&(g=g.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,"")),r=g.match(/(.+) - (.+)/),r?p=r[1]:(r=g.match(/(.+)-(.+)/),r&&(p=r[1])),p&&(p=p.replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),l[p]||(l[p]=[]),l[p].push(f))}for(var m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v.length>=c)for(d++,i=0;i<v.length;i++){var b=v[i];a.push({id:u++,base:b.base,src:b,dir:m,target:{dir:s+"/"+m,base:b.base}})}}return{groupCount:d,rows:a}},a=function(e,i){var r,a,l=[],c={},s=e.minsize,d=e.useSsourceDir?n():o(),u=0,f=0;for(r=0;r<i.length;r++){var g=i[r],p=g.base,m=null;e.ignoreBrackets&&(p=p.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,"")),a=p.match(/(\w+)\W(.+)/),a&&(m=a[1]);try{m&&(m=m.replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),c[m]||(c[m]=[]),c[m].push(g))}catch(v){t.warn(v),t.warn("m",a),t.warn('can set property "'+m+'"!')}}for(var b in c)if(c.hasOwnProperty(b)){var h=c[b];if(h.length>=s)for(u++,r=0;r<h.length;r++){var S=h[r];l.push({id:f++,base:S.base,src:S,dir:b,target:{dir:d+"/"+b,base:S.base}})}}return{groupCount:u,rows:l}},l=function(e,t){var i,r=[],a={},l=e.minsize,c=e.useSsourceDir?n():o(),s=0,d=0;for(i=0;i<t.length;i++){var u=t[i],f=u.base;e.ignoreBrackets&&(f=f.replace(/\[[^\]]+\]/g,"").replace(/\([^\)]+\)/g,""));var g=f.match(/(\d)+/g),p=f.match(/(\D)+/g);if(g&&g.length>=1&&p&&p.length>=2){var m=p[0];m=m.replace(/#/g,"").replace(/ Band /g,"").replace(/'/g,"").replace(/(^[\.\s_-]+|[\.\s_-]+$)/g,""),m&&(a[m]||(a[m]=[]),a[m].push(u))}}for(var v in a)if(a.hasOwnProperty(v)){var b=a[v];if(b.length>=l)for(s++,i=0;i<b.length;i++){var h=b[i];r.push({id:d++,base:h.base,src:h,dir:v,target:{dir:c+"/"+v,base:h.base}})}}return{groupCount:s,rows:r}},c=function(e,t){var i,r=[],a=e.useSsourceDir?n():o(),l=e.newFolder;if(l)for(i=0;i<t.length;i++){var c=t[i];r.push({id:i,base:c.base,src:c,dir:l,target:{dir:a+"/"+l,base:c.base}})}return{groupCount:1,rows:r}},s=function(e,o){return"new_folder"===e.modus?c(e,o):"runnig_number"===e.modus?l(e,o):"minus_separator"===e.modus?r(e,o):"first_word"===e.modus?a(e,o):e.modus.indexOf("letter")>-1?(e.lower=e.modus.indexOf("lower")>-1,e.upper=e.modus.indexOf("upper")>-1,e.twoLetters=e.modus.indexOf("two")>-1,i(e,o)):(t.warn("updateTableModel. Unknown mode:",e.modus),{groupCount:0,rows:[]})},d={};return d.updateTableModel=s,d}angular.module("groupfilesTableService",[]).factory("groupfilesTableService",e),e.$inject=["mainService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("moveActionService...");var n=e.getTargetDir,i=e.slash,r=e.getPossibleTargetFolders,a=e.getRowsForAction,l=e.getSourcePanelIndex,c=e.getTargetPanelIndex,s=function(o){var n,r,s,d=i(o),u=[],f=a(),g=l(),p=c();for(n=0;n<f.length;n++)r={dir:i(f[n].dir),base:f[n].base},s={dir:d,base:f[n].isDir?"":f[n].base},u.push(t.move({bulk:f.length>t.BULK_LOWER_LIMIT,src:r,srcPanelIndex:g,target:s,targetPanelIndex:p}));u.push(t.refreshPanel(g)),u.push(t.refreshPanel(p)),e.storeLastRowIndex(),t.addActions(u)},d={};return d.getTargetDir=n,d.getPossibleTargetFolders=r,d.getRowsForAction=a,d.move=s,d}angular.module("moveActionService",[]).factory("moveActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("MoveActionController...");var r=this;r.getPossibleTargetFolders=t.getPossibleTargetFolders,r.targetDir=t.getTargetDir(),r.optionsVisible=!1,r.sourceText="",r.sourceFiles=[],r.okEnabled=!1,r.toggleOptions=function(){r.optionsVisible=!r.optionsVisible},r.move=function(){t.move(r.targetDir)},r.setTargetDir=function(e){r.targetDir=e};var a,l=function(e,o,i){n(function(){r.scanning=!i,r.sum=o,r.sourceText=e,r.okEnabled=t.getRowsForAction()})},c=function(){i.info("MoveActionController.init()... "+new Date),r.okEnabled=!1,r.sourceText="",r.targetDir=t.getTargetDir(),a=e.walkSelected(l)},s=function(){e.cancelWalk(a)};o.removeListenersForKey("OPEN_MOVE_DLG_ON_SHOW").removeListenersForKey("OPEN_MOVE_DLG_ON_SHOWN").removeListenersForKey("OPEN_MOVE_DLG_ON_HIDDEN").addListener("OPEN_MOVE_DLG_ON_SHOW",c).addListener("OPEN_MOVE_DLG_ON_HIDDEN",s)}angular.module("MoveActionController",[]).controller("MoveActionController",e),e.$inject=["deepSelectionService","moveActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o){o.info("mkdirActionService...");var n=e.getSourceDir,i=e.getSourcePanelIndex,r=function(){var t=e.getSelectedRows();if(t.length>0){var o=t[0].base;return o.indexOf(".")>-1?o.substring(0,o.lastIndexOf(".")):o}return""},a=function(e,o){var n=i();t.addActions([t.mkdir({dir:e,base:o,panelIndex:n}),t.refreshPanel(n)])},l={};return l.getInitName=r,l.getSourceDir=n,l.mkdir=a,l}angular.module("mkdirActionService",[]).factory("mkdirActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("MkdirActionController...");var n=this;n.name="",n.targetDir="",n.okEnabled=!1,n.setTargetDirTemp=function(e){n.targetDirTemp=e};var i=function(){o.info("MkdirActionController.init()... "+new Date),n.okEnabled=!1,n.targetDir=e.getSourceDir(),n.name=e.getInitName()};n.mkdir=function(){e.mkdir(n.targetDir,n.name)},t.removeListenersForKey("OPEN_MKDIR_DLG_ON_SHOW"),t.addListener("OPEN_MKDIR_DLG_ON_SHOW",i)}angular.module("MkdirActionController",[]).controller("MkdirActionController",e),e.$inject=["mkdirActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){i.info("findActionService...");var r,a={},l=e.getSourceDir,c=e.getSourcePanelIndex,s=e.getSelectedRows,d=o.addTab,u=t.search,f=n.loadDirectory,g=0,p={quickinput:""},m=[],v=function(){var e=p.quickinput;try{"123".match(e)}catch(t){return void i.warn("Could not parse pattern! "+e)}d(c(),function(t,o){g++,o.fileList=[],o.path="search_"+g,o.label="Search "+g,f(t,{fileList:o.fileList});var n=p.source,i=[];"all"===n?i=m:i.push(n);var a={pathes:i,pattern:e},l=Date.now();r=u(a,function(e,n){e&&e.base&&(o.fileList.push(e),o.running=!0,Date.now()-l>2e3&&(l=Date.now(),f(t,{fileList:o.fileList}))),n&&(o.running=!1,f(t,{fileList:o.fileList}))})})},b=function(){m=[],p.source=null,p.sources=[{value:l(),label:l()}];for(var e=s(),t=[],o=0;o<e.length;o++)if(e[o].isDir){var n=e[o].dir+"/"+e[o].base;t.push({value:n,label:n}),m.push(n),0===o&&(p.source=n)}return t.length>1&&(p.sources.push({value:"all",label:"All "+t.length+" selected folders"}),p.source="all"),null===p.source&&(p.source=p.sources[0].value),p.sources=p.sources.concat(t),p};return a.find=v,a.getDialogData=b,a}angular.module("findActionService",[]).factory("findActionService",e),e.$inject=["mainService","searchService","tabService","folderService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("FindActionController...");var n=this;n.data={},n.setQuickinput=function(e){n.data.quickinput=e},n.ok=function(){e.find()};var i=function(){n.data=e.getDialogData(),o.info("FindActionController.init()...",n.data)};t.removeListenersForKey("OPEN_FIND_DLG_ON_SHOW").removeListenersForKey("OPEN_FIND_DLG_ON_SHOWN").removeListenersForKey("OPEN_FIND_DLG_ON_HIDDEN").addListener("OPEN_FIND_DLG_ON_SHOW",i)}angular.module("FindActionController",[]).controller("FindActionController",e),e.$inject=["findActionService","notifyService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("renameActionService...");var n,i=e.getSourcePanelIndex,r=function(){return n=e.getFirstSelectedItem(),n?n.base:""},a=function(o){var r=i(),a=[];a.push(t.rename({bulk:!1,src:{dir:n.dir,base:n.base},srcPanelIndex:r,target:{dir:n.dir,base:o},targetPanelIndex:r})),a.push(t.refreshPanel(r)),e.storeLastRowIndex(),t.addActions(a)},l={};return l.getSourceText=r,l.rename=a,l}angular.module("renameActionService",[]).factory("renameActionService",e),e.$inject=["mainService","commandService","$log"]}(),function(){"use strict";function e(e,t,o){o.info("RenameActionController...");var n=this;n.optionsVisible=!1,n.sourceText="",n.targetText="",n.toggleOptions=function(){n.optionsVisible=!n.optionsVisible},n.rename=function(){e.rename(n.targetText)};var i=function(){o.info("RenameActionController.init()... "+new Date),n.okEnabled=!1,n.sourceText=e.getSourceText(),n.targetText=n.sourceText};t.removeListenersForKey("OPEN_RENAME_DLG_ON_SHOW").removeListenersForKey("OPEN_RENAME_DLG_ON_SHOWN").removeListenersForKey("OPEN_RENAME_DLG_ON_HIDDEN").addListener("OPEN_RENAME_DLG_ON_SHOW",i)}angular.module("RenameActionController",[]).controller("RenameActionController",e),e.$inject=["renameActionService","notifyService","$log"]}(),function(){"use strict";function e(e){var t={"text-muted":function(e){return"Untouched"===e.data.status},"bg-danger":function(e){return"Error"===e.data.status},"font-weight-bold":function(e){return"OK"===e.data.status&&"target"===e.colDef.field}},o=[{headerName:"No",field:"id",width:60,icons:e.ALPHA_ICONS,cellClassRules:t,sort:"asc"},{headerName:"Old Name",field:"source",width:400,icons:e.TEXT_SORT_ICONS,comparator:e.nameComparator,cellClassRules:t,cellRenderer:e.fileBaseCellRenderer},{headerName:"Info",field:"status",width:100,icons:e.TEXT_SORT_ICONS,cellClassRules:t,sort:"desc"},{headerName:"New Name",field:"target",width:500,icons:e.TEXT_SORT_ICONS,comparator:e.nameComparator,cellClassRules:t,cellRenderer:e.fileBaseCellRenderer}],n={rowData:[],headerHeight:30,rowHeight:23,columnDefs:o,enableColResize:!0,enableSorting:!0,sortingOrder:["asc","desc"],icons:e.ICONS},i={data:{okEnabled:!0,name:"[N].[E]",counterStart:"1",counterStep:"1",counterDigits:"4",replacementsChecked:!1,replacements:[{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""},{checked:!1,textFrom:"",textTo:"",regExpr:!1,ifFlag:!1,ifMatch:""}],replaceGermanUmlauts:!1,replaceRiskyChars:!1,replaceSpaceToUnderscore:!1,replaceParentDir:!1,capitalizeMode:"none",gridOptions:n,makros:[{cat:"Reorder words",title:"prename name - title -> name, prename - title",example:'"Sebastian Fitzek - Das Joshua-Profil.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/([^.\\s\\-]+)\\s([^.\\s-]+)\\s\\-\\s(.+)/g",regExpr:!0,textTo:"$2, $1 - $3",ifFlag:!0,ifMatch:"/([^,]) - ([^,]+)/"}},{cat:"Reorder words",title:"title - prename name -> name, prename - title",example:'"Das Joshua-Profil - Sebastian Fitzek.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/(.+)\\s\\-\\s([^.\\s]+)\\s([^.]+)\\.([^.]+)/g",regExpr:!0,textTo:"$3, $2 - $1.$4",ifFlag:!0,ifMatch:"/([^,]) - ([^,]+)/"}},{cat:"Reorder words",title:"title - lastname, prename.suffix ->  lastname, prename - title.suffix",example:'"Das Joshua-Profil - Fitzek, Sebastian.epub" -> "Fitzek, Sebastian - Das Joshua-Profil.epub"',data:{textFrom:"/(.+)\\s\\-\\s([^.\\s]+)[\\s,]([^.]+)\\.([^.]+)/g",regExpr:!0,textTo:"$2, $3 - $1.$4",ifFlag:!0,ifMatch:"/([^,]) - ([^.\\s]+)[\\s,]([^.]+)/"}}]},options:{digits:[{value:1,label:"1"},{value:2,label:"02"},{value:3,label:"003"},{value:4,label:"0004"},{value:5,label:"00005"},{value:6,label:"000006"},{value:7,label:"0000007"},{value:8,label:"00000008"},{value:9,label:"000000009"},{value:10,label:"0000000010"}],starts:[{value:0,label:"0"},{value:1,label:"1"},{value:10,label:"10"},{value:100,label:"100"},{value:1e3,label:"1.000"},{value:1e4,label:"10.000"},{value:1e5,label:"100.000"},{value:1e6,label:"1000.000"}],steps:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:30,label:"50"},{value:100,label:"100"},{value:1e3,label:"1.000"}],capitalizeModes:[{value:"none",label:"none"},{value:"uppercase",label:"to uppercase"},{value:"lowercase",label:"to lowercase"},{value:"capitalize_first_letter",label:"capitalize first letter"},{value:"capitalize_words",label:"capitalize words"},{value:"chicago_manual_of_style",label:"chicago manual of style"}]}},r=function(){return i},a={};return a.getDialogData=r,a}angular.module("multirenameDataService",[]).factory("multirenameDataService",e),e.$inject=["gridiconService"]}(),function(){"use strict";function e(e,t,o,n){n.info("multirenameActionService...");var i=e.getSelectedFilesAndFolders,r=e.slash,a=e.getSourcePanelIndex,l=t.getDialogData,c=l(),s=function(e){for(var t="(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|v[.]?|via|vs[.]?)",o="([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]*)",n=[],i=/[:.;?!] |(?: |^)["Ò]/g,r=0,a=function(e){return e.toLowerCase()},l=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};;){var c=i.exec(e);if(n.push(e.substring(r,c?c.index:e.length).replace(/\b([A-Za-z][a-z.'Õ]*)\b/g,function(e){return/[A-Za-z]\.[A-Za-z]/.test(e)?e:l(e)}).replace(RegExp("\\b"+t+"\\b","ig"),a).replace(RegExp("^"+o+t+"\\b","ig"),function(e,t,o){return t+l(o)}).replace(RegExp("\\b"+t+o+"$","ig"),l)),r=i.lastIndex,!c)break;n.push(c[0])}return n.join("").replace(/ V(s?)\. /gi," v$1. ").replace(/(['Õ])S\b/gi,"$1s").replace(/\b(AT&T|Q&A)\b/gi,function(e){return e.toUpperCase()})},d=function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},u=function _(e,t){return e.length<t?_("0"+e,t):e},f=function(e){return e.replace(/Â|À|Å|Ã/g,"A").replace(/â|à|å|ã/g,"a").replace(/Ä/g,"AE").replace(/ä/g,"ae").replace(/Ç/g,"C").replace(/ç/g,"c").replace(/É|Ê|È|Ë/g,"E").replace(/é|ê|è|ë/g,"e").replace(/Ó|Ô|Ò|Õ|Ø/g,"O").replace(/ó|ô|ò|õ/g,"o").replace(/Ö/g,"OE").replace(/ö/g,"oe").replace(/Š/g,"S").replace(/š/g,"s").replace(/ß/g,"ss").replace(/Ú|Û|Ù/g,"U").replace(/ú|û|ù/g,"u").replace(/Ü/g,"UE").replace(/ü/g,"ue").replace(/Ý|Ÿ/g,"Y").replace(/ý|ÿ/g,"y").replace(/Ž/g,"Z").replace(/ž/,"z").replace(/\u00d6/g,"Oe").replace(/\u00f6/g,"oe").replace(/\u00d6/g,"Ue").replace(/\u00fc/g,"ue").replace(/\u00c4/g,"Ae").replace(/\u00e4/g,"ae").replace(/\u00df/g,"ß").replace(/\u0099/g,"Oe").replace(/\u0094/g,"oe").replace(/\u009A/g,"Ue").replace(/\u0081/g,"ue").replace(/\u008e/g,"Ae").replace(/\u0084/g,"ae")},g=function(e,t,o){var n=t.name,i=e.base.split(".").pop(),a=e.base.substr(0,e.base.lastIndexOf(i)-1),l=r(e.dir).split("/").pop();"chicago_manual_of_style"===t.capitalizeMode?a=s(a):"lowercase"===t.capitalizeMode?a=a.toLowerCase():"uppercase"===t.capitalizeMode?a=a.toUpperCase():"capitalize_first_letter"===t.capitalizeMode?a=a.charAt(0).toUpperCase()+a.slice(1):"capitalize_words"===t.capitalizeMode&&(a=d(a)),t.replaceGermanUmlauts&&(a=f(a)),t.replaceRiskyChars&&(a=a.replace(/[^a-zA-Z0-9_ \[\]\(\)\-\.]/g,"")),t.replaceSpaceToUnderscore&&(a=a.replace(/ /g,"_")),t.replaceParentDir&&(a=a.replace(l,""));var c=n.replace(/\[N\]/g,a).replace(/\[E\]/g,i).replace(/\[P\]/g,l),g=c.match(/\[N(\d+)\-(\d+)\]/);if(g&&(c=c.replace(g[0],a.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[N(\d+)\-\]/),g&&(c=c.replace(g[0],a.substring(parseInt(g[1])))),g=c.match(/\[N\-(\d+)\]/),g&&(c=c.replace(g[0],a.substring(0,parseInt(g[1])))),g=c.match(/\[E(\d+)\-(\d+)\]/),g&&(c=c.replace(g[0],i.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[E(\d+)\-\]/),g&&(c=c.replace(g[0],i.substring(parseInt(g[1])))),g=c.match(/\[E\-(\d+)\]/),g&&(c=c.replace(g[0],i.substring(0,parseInt(g[1])))),g=c.match(/\[P(\d+)\-(\d+)\]/),g&&(c=c.replace(g[0],l.substring(parseInt(g[1]),parseInt(g[2])))),g=c.match(/\[P(\d+)\-\]/),g&&(c=c.replace(g[0],l.substring(parseInt(g[1])))),g=c.match(/\[P\-(\d+)\]/),g&&(c=c.replace(g[0],l.substring(0,parseInt(g[1])))),c.indexOf("[C]")>-1){var m=parseInt(t.counterStart),v=parseInt(t.counterStep),b=parseInt(t.counterDigits),h=m+o*v,S=u(""+h,b);c=c.replace(/\[C\]/g,S)}if(t.replacementsChecked)for(var E=0;E<t.replacements.length;E++)c=p(c,t.replacements[E]);return{dir:e.dir,base:c}},p=function(e,t){if(e=e.replace(/\s+/g," "),t.checked&&(!t.ifFlag||m(t.ifMatch,e))){var o=t.textFrom.match(new RegExp("^/(.*?)/([gimy]*)$"));if(o&&t.regExpr){var n=new RegExp(o[1],o[2]);e=e.replace(n,t.textTo).replace(/,,/g,",")}else e=e.replace(t.textFrom,t.textTo)}return e},m=function(e,t){var o=e.match(new RegExp("^/(.*?)/([gimy]*)$"));if(o){var n=new RegExp(o[1],o[2]);return t.match(n)}return t.indexOf(e)>-1},v=[],b=function(){var e=i();v=[];var t;for(t=0;t<e.length;t++){var o=e[t],n={base:o.base,dir:o.dir},r=g(n,c.data,t);v.push({id:t,source:n,target:r,changed:n.base!=r.base})}c.data.gridOptions.api.setRowData(v)},h=function(){var e,t;for(e=0;e<v.length;e++){var o=v[e];o.target=g(o.source,c.data,e),o.status=o.source.base!=o.target.base?"OK":"Untouched"}for(e=0;e<v.length;e++)for(t=e+1;t<v.length;t++)v[e].target.base===v[t].target.base&&v[e].target.dir===v[t].target.dir&&(v[e].status="Error",v[t].status="Error");c.data.gridOptions.api.setRowData(v);var n=[{colId:"status",sort:"asc"},{colId:"id",sort:"asc"}];c.data.gridOptions.api.setSortModel(n)},S=function(){for(var t=a(),n=[],i=0;i<v.length;i++){var r=v[i];"OK"===r.status&&n.push(o.rename({bulk:v.length>o.BULK_LOWER_LIMIT,src:r.source,srcPanelIndex:t,target:r.target}))}n.length>0&&o.addActions(n),e.storeLastRowIndex(),n.push(o.refreshPanel(t))},E={};return E.getDialogData=l,E.multirename=S,E.initTableModel=b,E.softUpdateTableModel=h,E}angular.module("multirenameActionService",[]).factory("multirenameActionService",e),e.$inject=["mainService","multirenameDataService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("MultirenameActionController...");var i=this,r=e.getDialogData();i.data=r.data,i.options=r.options,i.multirename=e.multirename,i.softUpdateTableModel=e.softUpdateTableModel,i.makroSelected=function(e,t){e.checked=!0,e.textFrom=t.data.textFrom,e.textTo=t.data.textTo,e.regExpr=t.data.regExpr,e.ifFlag=t.data.ifFlag,e.ifMatch=t.data.ifMatch,i.softUpdateTableModel()};var a=function(){e.initTableModel()};t.removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_SHOW").removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_SHOWN").removeListenersForKey("OPEN_MULTIRENAME_DLG_ON_HIDDEN").addListener("OPEN_MULTIRENAME_DLG_ON_SHOW",a)}angular.module("MultirenameActionController",[]).controller("MultirenameActionController",e),e.$inject=["multirenameActionService","notifyService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("deepSelectionService...");var i=e.getSelectedCount,r=e.getFirstPossibleRow,a=e.getFirstSelectedItem,l=e.slash,c=e.getSelectedFiles,s=e.getSelectedAbsoluteFolders,d=e.getSelectedRows,u=e.fileSizeSI,f=0,g=t.on,p=t.removeListener,m=t.emit,v=function(e){n.info("deepSelectionService.cancelWalk",e),m("walk",{cancelled:!0,rid:e})},b=function(e){var t=i();if(n.info("deepSelectionService.walkSelected...",t),0===t){var l=r();if(l)return e(l.base,0,!0);e("nothing selected",0,!0)}else e(1===t?a().base:t+" files",1,!0);var v=d();if(v&&v.length){for(var b=c(),h=b.length,S=0,E=0;E<b.length;E++)S=+b[E].size;var _=s().length;f++;var D="walk"+f;g(D,function(t){t.base&&(t.isDir?_++:(h++,S+=t.size),e(h+" file"+(h>1?"s":"")+", "+_+" folder"+(_>1?"s":"")+" ("+u(S)+")",h+_,!1)),t.end&&(p(D),o(function(){_+h>1&&e(h+" file"+(h>1?"s":"")+", "+_+" folder"+(_>1?"s":"")+" ("+u(S)+")",h+_,!0)}))});var O={pathes:s(),rid:f};return m("walk",O),f}return null},h={};return h.slash=l,h.walkSelected=b,h.cancelWalk=v,h}angular.module("deepSelectionService",[]).factory("deepSelectionService",e),e.$inject=["mainService","socketService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("deepSumSizeService...");var i=e.getSourceGridApi,r=e.getFocusedRow,a=t.on,l=t.removeListener,c=t.emit,s=0,d=function(e){n.info("deepSumSizeService.cancelWalk",e),c("walksum",{cancelled:!0,rid:e})},u=function(){var e=r();if(e&&e.isDir){var t=i();if(e.size=0,e.isWalking)return;s++;var n="walksum"+s,d=Date.now();a(n,function(i){i.size&&(e.size=e.size+i.size,Date.now()-d>1e3&&(d=Date.now(),t.softRefreshView())),i.end&&(l(n),o(function(){e.isWalking=!1,t.softRefreshView()}))});var u={dir:e.dir+"/"+e.base,rid:s};return e.isWalking=!0,c("walksum",u),s}return null},f={};return f.calcSumsForSelectedRow=u,f.cancelWalk=d,f}angular.module("deepSumSizeService",[]).factory("deepSumSizeService",e),e.$inject=["mainService","socketService","$timeout","$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("selectionService...");var i={},r=e.getSourceGridApi,a=function(e){var t=r();t.forEachNodeAfterFilter(function(o){if(!t.isNodeSelected(o)){var n=o.data;n.base.match(e)&&t.selectNode(o,!0)}})},l=function(e){var t=r();t.forEachNodeAfterFilter(function(o){if(t.isNodeSelected(o)){var n=o.data;n.base.match(e)&&t.deselectNode(o)}})},c=function(){var e=r();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)||e.selectNode(t,!0)})},s=function(){var e=r();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)&&e.deselectNode(t,!0)})},d=function(){var e=r();e.forEachNodeAfterFilter(function(t){e.isNodeSelected(t)?e.deselectNode(t,!0):e.selectNode(t,!0)})};return t.addListener(o.ENHANCE_SELECTION,a),t.addListener(o.REDUCE_SELECTION,l),i.selectAll=c,i.deselectAll=s,i.toggleSelection=d,i.iam="selectionService",i}angular.module("selectionService",[]).factory("selectionService",e),e.$inject=["mainService","notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t,o){var n=this;n.data={},n.data.quickinput=".",n.setQuickinput=function(e){n.data.quickinput=e},n.ok=function(){e.emit(t.ENHANCE_SELECTION,n.data.quickinput)}}angular.module("SelectionController",[]).controller("SelectionController",e),e.$inject=["notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t,o){var n=this;n.data={},n.data.quickinput="",n.setQuickinput=function(e){n.data.quickinput=e},n.ok=function(){e.emit(t.REDUCE_SELECTION,n.data.quickinput)}}angular.module("DeselectionController",[]).controller("DeselectionController",e),e.$inject=["notifyService","constantsService","$log"]}(),function(){"use strict";function e(e,t){var o=function(t,o){e.get("config/color/"+t+".json").then(o)},n={};return n.loadColorConfig=o,n}angular.module("colorService",[]).factory("colorService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t,o,n){var i={},r=function d(e,t){var o,n;if(angular.isArray(e))for(o=0;o<e.length;o++)d(e[o],t);else if(angular.isObject(e))for(n in e)if(e.hasOwnProperty(n)){var i=e[n];if(angular.isArray(i)||angular.isObject(i))d(i,t);else for(o=0;o<t.length;o++)n===t[o]&&delete e[n]}},a=function(e){var o=t.getData();return o.favs?o.favs.indexOf(e)>-1:!1},l=function(e){var o=t.getData();if(o.favs){var n=o.favs.indexOf(e);n>-1&&o.favs.splice(n,1),s()}},c=function(e){var o=t.getData();o.favs||(o.favs=[]);var n=o.favs.indexOf(e);n>-1&&o.favs.splice(n,1),o.favs.push(e),s()},s=function(){var n=t.getData();console.info(n.colorname);var a={activePanelIndex:e.getSourcePanelIndex(),tabs:JSON.parse(JSON.stringify(n.tabs)),folderLatestAdded:JSON.parse(JSON.stringify(n.folderLatestAdded)),favs:JSON.parse(JSON.stringify(n.favs)),colorname:n.colorname};return r(a.tabs,["$$hashKey"]),r(a.folderLatestAdded,["$$hashKey"]),r(a.favs,["$$hashKey"]),o.emit("saveconfig",{username:n.initial.username,data:a},function(e,t){}),i};return i.saveconfig=s,i.fav=c,i.unfav=l,i.isFav=a,i}angular.module("configService",[]).factory("configService",e),e.$inject=["mainService","dataService","socketService","$log"]}(),function(){"use strict";function e(e){var t={},o=function(t){e.info("getDefaultTools()",t);var o=[];return t.windows?o.push({id:"CMD_SHELL",label:"CMD Shell",shortcut:"control shift m",cmd:"$clidir\\cmd.bat",para:" $dir ",local:!0}):t.osx?(o.push({id:"EDIT_FILE",label:"Edit",shortcut:"control 4",cmd:"sublime",fileLimit:4,para:" $file ",local:!0}),o.push({id:"CMD_SHELL",label:"CMD Shell",shortcut:"control 0",cmd:"open -a Terminal ",para:" $dir ",local:!0}),o.push({id:"CMD_REVEAL_IN_FINDER",label:"Reveal in Finder",shortcut:"control shift f",cmd:"open ",para:" $dir ",local:!0})):t.linux,o};return t.getDefaultTools=o,t}angular.module("toolService",[]).factory("toolService",e),
e.$inject=["$log"]}(),function(){"use strict";function e(e,t,o,n){n.info("colorconfigService...");var i=["primary-color","primary-background-color","primary-background-bit-different-color","secondary-background-color","secondary-color","secondary-muted-color","button-secondary-background-color","header-link-color","header-link-bit-different-color","header-link-selected-color","header-fav-star-selected-color","nav-tabs-border-color","item-selected-color","item-muted-color","cursor-row-background-color","cursor-row-color","dropdown-focussed-background-color","footer-primary-background-color","footer-primary-color","footer-filecount-background-color","footer-filecount-color","footer-btn-secondary-background-color","footer-btn-secondary-border-color","footer-btn-secondary-color","tooltip-background-color","tooltip-color","tooltip-background-input-color","tooltip-input-color","scrollbar-track-background","scrollbar-thumb-background","scrollbar-thumb-border-color","scrollbar-thumb-active-background"],r=function(){return i},a=function(e){var t=getComputedStyle(document.documentElement);return String(t.getPropertyValue(e)).trim().replace(/\\3/g,"").replace(/ /g,"")},l=function(e,t){document.documentElement.style.setProperty(e,t)},c={};return c.getCustomcolorKeys=r,c.getVariable=a,c.setDocumentVariable=l,c}angular.module("colorconfigService",[]).factory("colorconfigService",e),e.$inject=["mainService","gridiconService","commandService","$log"]}(),function(){"use strict";function e(e,t,o,n,i){o.info("ColorconfigController...");var r=this;r.data={},r.getCustomcolorKeys=e.getCustomcolorKeys;var a=e.getVariable,l=e.setDocumentVariable,c=0,s=function(){o.info("ColorconfigController.init()...");for(var e=r.getCustomcolorKeys(),t=0;t<e.length;t++){var s=e[t],u=a("--"+s);r.data[s]=u,o.info(s,u),function(e){n.$watch(function(t){return r.data[e]},function(t,o){t&&l("--"+e,t)})}(s)}o.info("vm",r),i(function(){var e="#fnf-colorconfig-action-dialog input.color-picker";$.browser={chrome:!0},$(e).each(function(e,t){var o=$(t);c++,o.data("tool",c);var n=o.val();if(n){var i=d(n);o.css("background-color",n).css("color","#"+i)}return o.popover({template:'<div class="popover colorpopover" role="tooltip"><div class="popover-arrow"></div><div class="popover-content"></div></div>',trigger:"focus",placement:e>10?"top":"right",html:!0,content:"<div id='colorpicker-"+o.data("tool")+"'><div class='color-picker'></div></div>"}).on("click",function(){var e="#colorpicker-"+o.data("tool"),t=$.farbtastic(e,{});t.setColor(o.val()),t.linkTo(function(e){var t=d(e);console.info("color",e),console.info("ch",t),o.val(e).change().css("background-color",e).css("color","#"+t)})})})})},d=function(e){e=e.replace(/#/g,"");for(var t="",o=0;6>o;o++)t+=(15-parseInt(e[o],16)).toString(16);return t};t.removeListenersForKey("OPEN_COLORCONFIG_DLG_ON_SHOW").removeListenersForKey("OPEN_COLORCONFIG_DLG_ON_SHOWN").removeListenersForKey("OPEN_COLORCONFIG_DLG_ON_HIDDEN").addListener("OPEN_COLORCONFIG_DLG_ON_SHOW",s)}angular.module("ColorconfigController",[]).controller("ColorconfigController",e),e.$inject=["colorconfigService","notifyService","$log","$scope","$timeout"]}(),function(){"use strict";function e(e,t,o){o.info("GridPopupController...");var n=function(e,o){console.info(e);var n=e.target?e.target:e.srcElement,i=$("#gridPopup");$(n).click(),t(function(){i.addClass("open"),new Tether({element:i,target:n,attachment:"middle left",targetAttachment:"middle left"})},111)};e.addListener("SHOW_POPUP",function(e,t){n(e.event,e.panelIndex)})}angular.module("app").controller("GridPopupController",e),e.$inject=["notifyService","$timeout","$log"]}(),angular.module("templates",[]).run(["$templateCache",function(e){e.put("/fnf/drop/dialog.html",'<div id="fnf-drop-action-dialog" ng-controller="DropActionController as dnd" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Drop (not implemented yet)</h4></div><div class="modal-body"><div class="horizontal layout"><div class="flex-1"><div><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 alert" ng-class="{\'alert-success\':dnd.what===\'copy\'}" dropzone><br><br><br><br>Drop here for upload...<br><br><br><br></div></div></div></div></div><div class="modal-footer"><span drag-enter="dnd.select(\'cancel\')"><span drag-leave="dnd.clear(\'cancel\')"><button ng-class="{\'alert-success\':dnd.what===\'cancel\'}" drop="dnd.closeDlg()" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button></span></span></div></div></div></div>'),e.put("/fnf/action/gotoanything/dialog.html",'<div class="fullheight modal fade from-left" id="gotoAnythingModal" data-backdrop="true" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="GotoAnythingController as g2a"><form class="layout horizontal xxxbg-inverse"><h4 class="pull-left" data-dismiss="modal">&nbsp;<i class="fa fa-arrow-circle-o-left"></i>&nbsp;&nbsp;</h4><input autofocus class="form-control flex" type="text" placeholder="Go to anything" ng-model="g2a.selected" ng-dblclick="g2a.selected= \'\'" typeahead-show-hint="true" uib-typeahead="cmd as cmd.label for cmd in g2a.commands | filter:$viewValue | limitTo:12"> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-click="g2a.execute()">Execute</button></form></div></div></div></div>'),e.put("/fnf/action/jobqueue/dialog.html",'<div class="fullscreen modal fade from-right" id="jobqueueModal" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="JobQueueController as job"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-right" data-dismiss="modal"></i> Job Queue</h4></div></div><div id="fnf-jobs-grid-container" class="fnf-grid-container scroll flex horizontal layout fnf-active-panel"><div id="fnf-jobs-grid" class="fnf-grid" ag-grid="job.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-secondary pull-left" ng-show="job.getQueueStatus()===\'ERROR\'" ng-click="job.next(0)">Restart Queue</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/chdir/dialog.html",'<div class="fullscreen modal fade from-right" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit" ng-controller="ChdirActionController as chdir"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 pull-left"><h4><i class="fa fa-arrow-circle-o-right" data-dismiss="modal"></i> &nbsp;Change Dir</h4></div><div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 pull-left"><input autofocus class="form-control" type="text" placeholder="Filter" ng-dblclick="chdir.gridOptions.quickFilterText = \'\'" ng-model="chdir.gridOptions.quickFilterText"></div><div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 col-xl-1 pull-left"><h4 ng-show="chdir.running" ng-click="chdir.cancelWalk()"><i class="fa fa-circle-o-notch fa-spin pull-right"></i></h4></div></div><div id="fnf-chdir-grid-container" class="fnf-grid-container scroll flex horizontal layout fnf-active-panel"><div id="fnf-chdir-grid" class="fnf-grid" ag-grid="chdir.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-click="chdir.chdirClicked()">Chdir</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/copy/dialog.html",'<div id="fnf-copy-action-dialog" ng-controller="CopyActionController as copy" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Copy</h4></div><div class="modal-body"><fieldset class="form-group"><label>Source <span class="text-muted" ng-show="copy.scanning">&nbsp;&nbsp;&nbsp;scanning...{{copy.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="copy.sourceText"></fieldset><fieldset class="form-group"><label>Target</label><div class="input-group"><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="copy.targetDir"><div class="input-group-btn"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right"><a ng-repeat="f in copy.getPossibleTargetFolders() track by $index" class="dropdown-item" href="#" ng-bind="f" ng-click="copy.setTargetDir(f)"></a></div></div></div></fieldset><div ng-show="copy.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary pull-left" ng-click="copy.toggleOptions()">Options</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!copy.okEnabled" ng-click="copy.copy()">Copy</button></div></div></div></div>'),e.put("/fnf/commands/delete/dialog.html",'<div id="fnf-delete-action-dialog" ng-controller="DeleteActionController as del" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete</h4></div><div class="modal-body"><fieldset class="form-group"><label>Selected <span class="text-muted" ng-show="del.scanning">&nbsp;&nbsp;&nbsp;scanning...{{del.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="del.sourceText"></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!del.okEnabled" ng-click="del.callDelete()">Delete</button></div></div></div></div>'),e.put("/fnf/commands/deleteemptyfolders/dialog.html",'<div id="fnf-deleteemptyfolders-action-dialog" ng-controller="DeleteEmptyFoldersActionController as del" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete empty folders</h4></div><div class="modal-body"><fieldset class="form-group"><label>Start folder</label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="del.sourceText"></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!del.okEnabled" ng-click="del.callDeleteEmptyFolders()">Delete</button></div></div></div></div>'),e.put("/fnf/commands/find/dialog.html",'<div id="fnf-find-dialog" ng-controller="FindActionController as find" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Find</h4></div><div class="modal-body"><div><form class="form"><fieldset class="form-group col-sm-12"><label>Search in&nbsp;</label><select class="form-control c-select" ng-model="find.data.source"><option ng-repeat="i in find.data.sources" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-12"><label>Search for&nbsp;</label><div class="input-group"><input autofocus type="text" class="form-control" ng-model="find.data.quickinput" placeholder="pattern"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.cbr$|.cbz$\')">.cbr$|.cbz$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.js(.){0,2}$\')">.jsp$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.epub$\')">.epub$</a></li><li><a href="javascript:void(0)" ng-click="find.setQuickinput(\'.jpg$|.jpeg$|.png$|.gif$|.bmp$\')">.</a></li></ul></div></fieldset></form><br><br>.</div></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="find.ok();" class="btn btn-primary">Find</button></div></div></div></div>'),e.put("/fnf/commands/finddublicates/dialog.html",'<div class="fullscreen modal fade from-bottom" id="findDublicatesModal" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4>Find dublicates</h4></div></div><div class="scroll flex horizontal layout"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 pull-left">Content...</div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Close</button></div></div></div></div></div></div>'),e.put("/fnf/commands/groupfiles/dialog.html",'<div id="fnf-groupfiles-action-dialog" class="fullscreen modal fade from-bottom" ng-controller="GroupfilesActionController as gf" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-down" data-dismiss="modal"></i> Group files</h4></div></div><div><form class="form-inline"><fieldset class="form-group col-sm-3"><label>Mode&nbsp;</label><select autofocus class="form-control c-select" ng-model="gf.data.modus" ng-change="gf.updateTableModel()"><option ng-repeat="i in gf.data.modes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-3" ng-show="gf.data.modus === \'new_folder\'"><input class="form-control" type="text" ng-model="gf.data.newFolder" ng-change="gf.updateTableModel()" placeholder="Folder Name"></fieldset><fieldset class="form-group col-sm-2" ng-show="gf.data.modus !== \'new_folder\'"><label><input class="form-control" type="checkbox" ng-model="gf.data.ignoreBrackets" ng-click="gf.updateTableModel()"> Ignore Brackets</label><select class="form-control invisible"></select></fieldset><fieldset class="form-group col-sm-2"><label><input class="form-control" type="checkbox" ng-model="gf.data.useSsourceDir" ng-click="gf.updateTableModel()"> Use Source Dir</label><select class="form-control invisible"></select></fieldset><fieldset ng-show="gf.data.modus===\'runnig_number\'" class="form-group col-sm-3"><label>Minimal group size&nbsp;</label><select class="form-control c-select" ng-model="gf.data.minsize" ng-change="gf.updateTableModel()"><option ng-repeat="i in gf.data.minsizes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset ng-show="gf.data.modus===\'runnig_number\'" class="form-group col-sm-2 text-muted"><label ng-bind="gf.data.groupCount"></label><label>&nbsp;groups found</label><select class="form-control invisible"></select></fieldset></form></div><div id="fnf-groupfiles-grid-container" class="fnf-grid-container scroll flex horizontal layout"><div id="fnf-groupfiles-grid" class="fnf-grid" ag-grid="gf.data.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button fnf-click-on-ctrl-enter type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-disabled="!gf.data.okEnabled" ng-click="gf.move()">Move</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal" ng-disabled="!gf.data.okEnabled" ng-click="gf.copy()">Copy</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Cancel</button></div></div></div></div></div></div>'),e.put("/fnf/commands/mkdir/dialog.html",'<div id="fnf-mkdir-action-dialog" ng-controller="MkdirActionController as mkdir" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Make Directory</h4></div><div class="modal-body"><form class="form-inline"><fieldset class="form-group"><label ng-bind="mkdir.targetDir + \'/ \'"></label>&nbsp; <input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="mkdir.name"></fieldset></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!mkdir.targetDir" ng-click="mkdir.mkdir()">MkDir</button></div></div></div></div>'),e.put("/fnf/commands/move/dialog.html",'<div id="fnf-move-action-dialog" ng-controller="MoveActionController as move" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Move</h4></div><div class="modal-body"><fieldset class="form-group"><label>Source <span class="text-muted" ng-show="copy.move">&nbsp;&nbsp;&nbsp;scanning...{{move.sum}} <i class="fa fa-refresh fa-spin"></i></span></label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="move.sourceText"></fieldset><fieldset class="form-group"><label>Target</label><div class="input-group"><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="move.targetDir"><div class="input-group-btn"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu dropdown-menu-right"><a ng-repeat="f in move.getPossibleTargetFolders() track by $index" class="dropdown-item" href="#" ng-bind="f" ng-click="move.setTargetDir(f)"></a></div></div></div></fieldset><div ng-show="move.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary pull-left" ng-click="move.toggleOptions()">Options</button> <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!move.okEnabled" ng-click="move.move()">Move</button></div></div></div></div>'),e.put("/fnf/commands/multirename/dialog.html",'<div id="fnf-multirename-action-dialog" class="fullscreen modal fade from-bottom" ng-controller="MultirenameActionController as multirename" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><button type="button" class="btn btn-link pull-right" data-dismiss="modal">&times;</button><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-down" data-dismiss="modal"></i> Multi Rename</h4></div></div><div><form class="form"><fieldset class="form-group col-sm-3" style="margin-bottom: 0"><label for="nameInput">New Name</label><input autofocus type="text" class="form-control form-group col-sm-6" id="nameInput" placeholder="[N].[E]" ng-model="multirename.data.name" ng-dblclick="multirename.data.name=\'[N].[E]\';multirename.softUpdateTableModel();" ng-change="multirename.softUpdateTableModel()"></fieldset><fieldset class="form-group col-sm-3"><label>Capitalize</label><select class="form-control c-select" ng-model="multirename.data.capitalizeMode" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.capitalizeModes" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Start</label><select class="form-control c-select" ng-model="multirename.data.counterStart" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.starts" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Step</label><select class="form-control c-select" ng-model="multirename.data.counterStep" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.steps" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-2"><label>Counter Digits</label><select class="form-control c-select" ng-model="multirename.data.counterDigits" ng-change="multirename.softUpdateTableModel()"><option ng-repeat="i in multirename.options.digits" value="{{i.value}}" ng-bind="i.label"></option></select></fieldset><fieldset class="form-group col-sm-12"><label>[N] Name, [N#-#] Part of Name, [E] Extension, [E#-#] Part of Ext, [C] Counter, [P] Parent Dir</label></fieldset></form><form class="form form-inline"><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input type="checkbox" ng-model="multirename.data.replaceGermanUmlauts" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Fix german umlauts</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceRiskyChars" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Replace risky chars</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceSpaceToUnderscore" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Space to underscore</label></fieldset><fieldset class="form-group col-sm-2"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replaceParentDir" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Remove parent dir</label></fieldset></form><form class="form form-inline"><fieldset class="form-group col-sm-12"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="multirename.data.replacementsChecked" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Search and replace</label></fieldset><fieldset class="form-group col-sm-12 fnf-replacements" ng-show="multirename.data.replacementsChecked" ng-repeat="rep in multirename.data.replacements"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.checked" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> Replace</label><button class="btn btn-link brn-sm dropdown-toggle" type="button" id="dropdownMenu{{$index}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><div class="dropdown-menu" aria-labelledby="dropdownMenu{{$index}}"><a ng-repeat="makro in multirename.data.makros" ng-click="multirename.makroSelected(rep, makro)" class="dropdown-item" href="#"><div ng-bind="makro.title"></div><div ng-bind="makro.example" class="text-muted"></div></a></div><input type="text" class="form-control form-control-sm fnf-mr-textfrom" id="textFrom{{$index}}" ng-model="rep.textFrom" ng-disabled="!rep.checked" ng-change="multirename.softUpdateTableModel()"><label>with</label><input type="text" class="form-control form-control-sm" ng-model="rep.textTo" ng-disabled="!rep.checked" ng-change="multirename.softUpdateTableModel()"><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.regExpr" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> RegExp</label><label class="c-input c-checkbox"><input class="form-control" type="checkbox" ng-model="rep.ifFlag" ng-click="multirename.softUpdateTableModel()"> <span class="c-indicator"></span> only if match</label><input type="text" class="form-control form-control-sm" ng-model="rep.ifMatch" ng-disabled="!rep.ifFlag || !rep.checked" ng-change="multirename.softUpdateTableModel()"></fieldset></form></div><div id="fnf-groupfiles-grid-container" class="fnf-grid-container scroll flex horizontal layout"><div id="fnf-multirename-grid" class="fnf-grid" ag-grid="multirename.data.gridOptions"></div></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-primary pull-right" data-dismiss="modal" ng-disabled="!multirename.data.okEnabled" ng-click="multirename.multirename()">Rename</button> <button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Cancel</button></div></div></div></div></div></div>'),e.put("/fnf/commands/rename/dialog.html",'<div id="fnf-rename-action-dialog" ng-controller="RenameActionController as rename" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Rename</h4></div><div class="modal-body"><fieldset class="form-group"><label>Current Name</label><input readonly="readonly" type="text" class="form-control" aria-label="Target folder" ng-model="rename.sourceText"></fieldset><fieldset class="form-group"><label>New Name</label><input autofocus type="text" class="form-control" aria-label="Target folder" ng-model="rename.targetText"></fieldset><div ng-show="rename.optionsVisible">TODO Options</div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button fnf-click-on-ctrl-enter type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="!rename.targetText" ng-click="rename.rename()">Rename</button></div></div></div></div>'),e.put("/fnf/commands/select/deselectdialog.html",'<div id="fnf-deselection-dialog" ng-controller="DeselectionController as desel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Reduce selections</h4></div><div class="modal-body"><fieldset><span class="input-group"><input autofocus type="text" class="form-control" ng-model="desel.data.quickinput"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.jsp$\')">*.jsp</a></li><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.epub$\')">*.epub</a></li><li><a href="javascript:void(0)" ng-click="desel.setQuickinput(\'.\')">*.*</a></li></ul></span></fieldset></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="desel.ok();" class="btn btn-primary">OK</button></div></div></div></div>'),e.put("/fnf/commands/select/selectdialog.html",'<div id="fnf-selection-dialog" ng-controller="SelectionController as sel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridModalLabel" aria-hidden="true"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="gridModalLabel">Enhance selections</h4></div><div class="modal-body"><fieldset><span class="input-group"><input autofocus type="text" class="form-control" ng-model="sel.data.quickinput"> <a href="javascript:void(0)" class="input-group-addon dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.cbr$|.cbz$\')">.cbr$|.cbz$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.jsp\')">.jsp$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.epub\')">.epub$</a></li><li><a href="javascript:void(0)" ng-click="sel.setQuickinput(\'.\')">.</a></li></ul></span></fieldset></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button> <button fnf-click-on-ctrl-enter data-dismiss="modal" aria-hidden="true" data-ng-click="sel.ok();" class="btn btn-primary">OK</button></div></div></div></div>'),e.put("/fnf/config/color/dialog.html",'<div id="fnf-colorconfig-action-dialog" class="fullheight modal fade from-left" ng-controller="ColorconfigController as colorconfigCtrl" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body fullbleed layout vertical fit"><div><div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11 pull-left"><h4><i class="fa fa-arrow-circle-o-left" data-dismiss="modal"></i> Color Config</h4></div></div><div class="flex-1 scroll"><form class="form-inline"><fieldset class="form-group col-sm-12"><div ng-repeat="ckey in colorconfigCtrl.getCustomcolorKeys()"><small><label id="customcolor_{{ckey}}" ng-bind="\'--\' + ckey + \':\'"></label></small><br><input type="text" class="form-control form-control-sm color-picker" ng-model="colorconfigCtrl.data[ckey]"></div></fieldset></form></div><div class="horizontal layout fnf-panel-bg"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"><button type="button" class="btn btn-secondary pull-right" data-dismiss="modal">Cancel</button></div></div></div></div></div></div>'),
e.put("/fnf/gui/filecount/filecount.html","<b>{{ model.getSelectedSizeSumText() }}</b> / {{ model.getSizeSumText() }} &nbsp;in <b>{{ model.getSelectedFileCount() }}</b> / {{ model.getFileCount()}} Files, &nbsp;<b>{{ model.getSelectedFolderCount() }}</b> / {{ model.getFolderCount()}} Folders"),e.put("/fnf/gui/filterinput/filterinput.html",'<div class="input-group text-xs-right"><input class="form-control fnf-filter-input" type="text" placeholder="Filter" ng-show="filterInputVisible" ng-change="filterInputChanged()" ng-model="quickFilterText"> <span class="input-group-btn"><button class="btn btn-link" type="submit" ng-click="onClicked()" ng-dblclick="onDblClicked()"><i class="fa fa-filter"></i></button></span></div>'),e.put("/fnf/gui/folderbutton/folderbutton.html",'<div class="btn-group" role="group"><button id="btnGroupDrop2" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-bind="label"></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop2"><a ng-repeat="disk in startingPoints" class="dropdown-item" href="#" ng-click="onFolderChanged({folder:disk})" ng-bind="disk"></a></div></div>'),e.put("/fnf/gui/menuitem/menuitem.html",'<a class="dropdown-item text-nowrap" href="#" ng-click="clickOn(id)">{{label}} <span class="pull-right" ng-bind-html="shortcut"></span></a>'),e.put("/fnf/gui/pathlabel/pathlabel.html",'<a ng-repeat-start="p in pathes track by $index" class="btn btn-link btn-sm fnf-link-btn" href="#" ng-click="clickOnIndex($index)" ng-class="{\'last\': $last}" ng-show="p" ng-bind="p"></a><span class="fnf-path-sep" ng-if="!$last" ng-repeat-end>/</span>')}]);